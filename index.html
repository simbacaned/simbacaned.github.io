<!DOCTYPE HTML>
<title>
    Tanky plane shoot shoot
</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<canvas id="canvas"></canvas>
<style>
    canvas {
        margin-top: 5%;
        margin-left: 20%;
        border: 1px solid black;
    }
</style>
<script>
    canvas.width = 1000;
    canvas.height = 900;
	preload=true
	c = document.getElementById("canvas");
	ctx = c.getContext("2d");
	loading = new Image()
	loading.src="img/loading.png"
    loading.onload=function(){
		ctx.drawImage(loading,0,0,1000,900);
		audio = new Audio('sound/feintwar.mp3');
		audio.volume=0.025
		//load images
		sdown = new Image()
		sdown.src="img/speedup.png"
		sup = new Image()
		sup.src="img/speeddown.png"
		Barrow = new Image()
		Barrow.src="img/arrow.png"
		phover = new Image()
		phover.src="img/phover.png"
		bhover = new Image()
		bhover.src="img/bhover.png"
		rhover = new Image()
		rhover.src="img/rhover.png"
		ghover = new Image()
		ghover.src="img/ghover.png"
		Grayhover = new Image()
		Grayhover.src="img/Grayhover.png"
		zap = new Image()
		zap.src="img/zap.png"
		path = new Image();
		path.src = "img/background.png";
		sidebar = new Image();
		sidebar.src = "img/sideBar.png";
		poison = new Image()
		poison.src="img/poison.png"
		red = new Image()
		red.src="img/RedT.png"
		blue = new Image()
		blue.src="img/BlueT.png"
		green = new Image()
		green.src="img/GreenT.png"
		yellow = new Image()
		yellow.src="img/YellowT.png"
		pink = new Image()
		pink.src="img/PinkT.png"
		black = new Image()
		black.src="img/BlackT.png"
		purple = new Image()
		purple.src="img/PurpleT.png"
		purack = new Image()
		purack.src="img/PurackT.png"
		sand = new Image()
		sand.src="img/sandt.png"
		baije = new Image()
		baije.src="img/baijeP.png"
		cyan = new Image()
		cyan.src="img/cyanP.png"
		orange = new Image()
		orange.src="img/orangeP.png"
		white = new Image()
		white.src="img/whiteP.png"
		pblack = new Image()
		pblack.src="img/Bplane.png"
		Pturret = new Image()
		Pturret.src="img/TowerOne.png"
		PturretF = new Image()
		PturretF.src="img/TowerOne.png"
		Bturret = new Image()
		Bturret.src="img/TowerTwo.png"
		BturretF = new Image()
		BturretF.src="img/TowerTwo.png"
		Rturret = new Image()
		Rturret.src="img/TowerThree.png"
		RturretF = new Image()
		RturretF.src="img/TowerThree.png"
		Gturret = new Image()
		Gturret.src="img/TowerFour.png"
		GturretF = new Image()
		GturretF.src="img/TowerFour.png"
		Tturret = new Image()
		Tturret.src="img/TowerFive.png"
		TturretF = new Image()
		TturretF.src="img/TowerFive.png"
		bullet = new Image()
		bullet.src="img/bullet.png"
		bomb = new Image()
		bomb.src="img/bomb.png"
		dart = new Image()
		dart.src="img/dart.png"
		start = new Image()
		start.src="img/startRound.png"
		bottom = new Image()
		bottom.src="img/bottomBar.png"
		exRange1 = new Image()
		exRange1.src="img/extendedrange100.png"
		exRange2 = new Image()
		exRange2.src="img/extendedrange250.png"
		exPierce1 = new Image()
		exPierce1.src="img/1pierce100.png"
		exPierce2 = new Image()
		exPierce2.src="img/2pierce500.png"
		exSpeed1 = new Image()
		exSpeed1.src="img/increasedSpeed400.png"
		exSpeed2 = new Image()
		exSpeed2.src="img/increasedFiringSpeed300.png"
		exSpeed3 = new Image()
		exSpeed3.src="img/increasedFiringSpeed600.png"
		exPierce3 = new Image()
		exPierce3.src="img/4pierce1000.png"
		potentpoison = new Image()
		potentpoison.src="img/potentpoison.png"
		longerpoison = new Image()
		longerpoison.src="img/longerpoison.png"
		seconddart = new Image()
		seconddart.src="img/seconddart.png"
		thirddart = new Image()
		thirddart.src="img/thirddart.png"
		exR = new Image()
		exR.src="img/ExplosionR.png"
		popBlacks = new Image()
		popBlacks.src="img/popblacks200.png"
		shrapnel = new Image()
		shrapnel.src="img/shrapnel990.png"
		twoarms = new Image()
		twoarms.src="img/twoarms600.png"
		arm = new Image()
		arm.src="img/arm380.png"
		leapadd = new Image()
		leapadd.src="img/leap450.png"
		biggerexplosionsfourlayers = new Image()
		biggerexplosionsfourlayers.src="img/biggerexplosionsfourlayers.png"
		damageplanes = new Image()
		damageplanes.src="img/damageplanes.png"
		fourshots = new Image()
		fourshots.src="img/fourstreams.png"
		infinitepierceblue = new Image()
		infinitepierceblue.src="img/infitepierce.png"
		insanefiring = new Image()
		insanefiring.src="img/insanefiringspeed.png"
		popsandbagsblue = new Image()
		popsandbagsblue.src="img/popsandbags.png"
		projectilevelocityblue = new Image()
		projectilevelocityblue.src="img/projectilesvelocityblue.png"
		rangevelocityexplosives = new Image()
		rangevelocityexplosives.src="img/rangevelocityexplosives.png"
		smallxplosions = new Image()
		smallxplosions.src="img/smallxplosions.png"
		twolayers = new Image()
		twolayers.src="img/twolayers.png"
		twoshots = new Image()
		twoshots.src="img/twostreams.png"
		velocityexplosives = new Image()
		velocityexplosives.src="img/velocityexplosives.png"
		projectilevrpurple = new Image()
		projectilevrpurple.src="img/projectilevrpurple.png"
		kaboom = new Image()
		kaboom.src="img/explosion.png"
		electroball = new Image()
		electroball.src="img/electroball.png"
		ship = new Image()
		ship.src="img/ship.png"
		bank = new Image()
		bank.src="img/bank.png"
		wigglywoo = new Image()
		wigglywoo.src="img/wigglywoo.png"
	    	base1 = new Image()
		base1.src="img/TowerOneBase.png"
	    	base2 = new Image()
		base2.src="img/TowerTwoBase.png"
	    	base4 = new Image()
		base4.src="img/TowerFourBase.png"
	    	base5 = new Image()
		base5.src="img/TowerFiveBase.png"
		canvas.addEventListener('mouseup', mousepressup)
		canvas.addEventListener('mousemove', mousepos)
		startscreen = new Image()
		startscreen.src="img/play.png"
		ingame=false
		banktext=[]
		startscreen.onload=function(){
			preload=false
			mainscreen()
		}
	}
	function mainscreen(){
		ctx.drawImage(startscreen,0,0);
	}
	function mousepressup(){
		if(preload==false&&!ingame&&mouseX>=377&&mouseX<=554&&mouseY>=552&&mouseY<=648){
			ingame=true
			accept()
		}
	}
	function mousepos(evt){
		rect=canvas.getBoundingClientRect();
		mouseX=evt.clientX - rect.left
		mouseY=evt.clientY - rect.top
	}
	function accept(){
		//variables
		Aarrayx1=[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 88, 89, 90, 91, 92, 94, 95, 97, 98, 99, 100, 102, 104, 106, 107, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 135, 136, 137, 138, 140, 141, 142, 143, 144, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 236, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263, 265, 266, 267, 270, 271, 272, 273, 274, 275, 276, 277, 278, 280, 281, 282, 283, 284, 285, 286, 287, 288, 290, 291, 292, 294, 295, 296, 297, 298, 299, 300, 302, 303, 304, 305, 306, 307, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 324, 325, 326, 327, 328, 329, 330, 331, 332, 333, 335, 336, 337, 338, 339, 340, 342, 343, 345, 346, 347, 349, 351, 352, 353, 355, 356, 357, 358, 359, 360, 361, 362, 363, 365, 366, 367, 368, 369, 370, 371, 372, 373, 374, 375, 376, 377, 378, 379, 380, 381, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 401, 402, 404, 405, 406, 407, 408, 409, 410, 411, 412, 414, 415, 416, 417, 418, 419, 420, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456, 458, 459, 460, 461, 462, 464, 465, 466, 467, 468, 470, 471, 472, 473, 474, 475, 476, 477, 478, 479, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 493, 494, 495, 496, 497, 498, 499, 500, 501, 502, 503, 504, 505, 506, 507, 508, 509, 510, 511, 512, 513, 514, 515, 516, 518, 519, 520, 521, 522, 523, 524, 525, 526, 526, 527, 528, 529, 530, 531, 532, 533, 534, 535, 536, 537, 538, 539, 540, 540, 540, 540, 541, 541, 542, 543, 544, 545, 546, 547, 548, 549, 550, 551, 552, 553, 554, 555, 556, 557, 558, 559, 560, 561, 562, 563, 564, 565, 567, 568, 569, 570, 572, 573, 574, 575, 576, 577, 578, 579, 580, 581, 582, 584, 585, 586, 587, 588, 589, 590, 591, 593, 594, 595, 596, 597, 598, 599, 600, 602, 603, 606, 607, 608, 609, 610, 611, 612, 613, 614, 617, 618, 619, 620, 621, 622, 623, 624, 625, 626, 627, 628, 629, 630, 631, 632, 633, 634, 635, 637, 638, 639, 640, 641, 642, 643, 644, 645, 646, 647, 648, 649, 650, 651, 652, 653, 655, 656, 657, 658, 659, 660, 661, 662, 663, 664, 665, 666, 667, 668, 669, 670, 671, 672, 673, 674, 676, 677, 678, 679, 680, 681, 682, 683, 684, 685, 686, 687, 688, 689, 690, 691, 692, 694, 695, 696, 698, 699, 700, 701, 702, 703, 704, 705, 706, 707, 709, 709, 709, 707, 706, 705, 705, 704, 704, 704, 704, 704, 704, 705, 705, 706, 707, 709, 709, 710, 710, 711, 712, 712, 713, 714, 715, 716, 717, 718, 719, 720, 721, 722, 723, 724, 725, 726, 727, 728, 729, 730, 731, 732, 733, 734, 734, 734, 734, 735, 735, 735, 736, 736, 736, 737, 737, 737, 738, 738, 738, 739, 739, 739, 740, 740, 740, 741, 741, 741, 742, 742, 742, 743, 743, 743, 744, 744, 744, 745, 745, 745, 746, 746, 746, 747, 747, 747, 748, 748, 748, 749, 749, 749, 750, 750, 750, 751, 751, 751, 752, 752, 752, 753, 753, 753, 754, 754, 754, 755, 755, 755, 756, 756, 756, 757, 757, 757, 757, 758, 758, 758, 759, 759, 759, 760, 760, 760, 761, 761, 761, 762, 762, 762, 763, 763, 763, 763, 764, 764, 765, 766, 767, 768, 770, 771, 772, 773, 774, 775, 776, 777, 778, 779, 780, 781, 782, 783, 784, 785, 786, 787, 788, 789, 790, 791, 792, 793, 794, 795, 796, 797, 798, 799]
		Aarrayy1=[685, 684, 683, 682, 682, 681, 681, 680, 679, 679, 679, 678, 678, 677, 677, 677, 676, 676, 676, 675, 675, 675, 674, 674, 674, 674, 674, 673, 673, 673, 673, 673, 673, 673, 673, 673, 673, 673, 673, 673, 673, 673, 673, 674, 674, 674, 675, 675, 675, 676, 676, 677, 677, 677, 678, 678, 678, 678, 678, 679, 679, 680, 680, 680, 681, 681, 681, 681, 681, 682, 682, 682, 682, 683, 683, 683, 684, 684, 684, 684, 684, 685, 685, 685, 685, 685, 685, 685, 686, 686, 686, 686, 686, 686, 686, 686, 686, 686, 686, 685, 685, 684, 683, 683, 682, 681, 681, 680, 679, 678, 678, 677, 676, 675, 675, 674, 673, 672, 671, 670, 669, 669, 668, 667, 667, 666, 664, 663, 662, 661, 659, 658, 657, 657, 656, 654, 654, 653, 651, 650, 649, 648, 647, 646, 645, 644, 643, 642, 641, 640, 639, 638, 638, 637, 636, 635, 634, 633, 633, 633, 631, 631, 631, 630, 629, 629, 628, 627, 626, 626, 625, 624, 623, 623, 622, 621, 620, 619, 619, 618, 617, 616, 616, 615, 614, 613, 612, 612, 611, 610, 610, 609, 608, 608, 607, 607, 606, 606, 605, 605, 604, 604, 603, 603, 603, 602, 602, 601, 601, 600, 600, 600, 600, 600, 599, 599, 599, 599, 599, 599, 599, 599, 599, 599, 598, 598, 598, 598, 598, 598, 598, 598, 598, 598, 598, 598, 598, 598, 598, 599, 599, 599, 599, 599, 599, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 601, 601, 601, 601, 602, 602, 602, 603, 603, 603, 603, 604, 604, 604, 604, 604, 604, 604, 605, 605, 605, 605, 606, 606, 607, 607, 607, 607, 608, 608, 608, 609, 609, 610, 610, 610, 611, 611, 611, 611, 612, 612, 612, 613, 613, 613, 613, 614, 614, 614, 615, 615, 615, 616, 616, 617, 617, 618, 618, 619, 619, 619, 619, 620, 620, 621, 621, 621, 622, 622, 623, 623, 624, 624, 624, 624, 625, 625, 626, 626, 627, 627, 627, 627, 628, 628, 628, 629, 629, 629, 630, 630, 630, 630, 631, 631, 631, 631, 632, 632, 632, 633, 633, 633, 633, 634, 634, 634, 634, 635, 635, 635, 635, 636, 636, 636, 637, 637, 637, 637, 638, 638, 638, 638, 638, 639, 639, 639, 639, 640, 640, 640, 640, 640, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 641, 640, 639, 638, 638, 637, 636, 636, 635, 635, 634, 633, 633, 632, 632, 631, 630, 630, 629, 628, 628, 627, 627, 626, 625, 625, 624, 623, 623, 622, 622, 621, 620, 620, 619, 618, 617, 617, 616, 614, 614, 613, 610, 609, 608, 607, 606, 604, 602, 601, 599, 597, 595, 594, 592, 589, 586, 585, 584, 583, 581, 578, 576, 574, 571, 568, 565, 562, 559, 555, 550, 546, 542, 538, 534, 530, 529, 526, 524, 522, 519, 518, 517, 516, 514, 513, 513, 512, 511, 511, 510, 509, 509, 508, 508, 508, 507, 507, 506, 506, 506, 505, 505, 505, 504, 504, 504, 504, 503, 503, 503, 502, 502, 502, 502, 502, 501, 501, 500, 500, 500, 500, 499, 499, 498, 498, 497, 497, 496, 496, 495, 495, 494, 494, 494, 493, 493, 492, 492, 492, 492, 491, 491, 490, 489, 489, 489, 488, 488, 488, 487, 487, 487, 487, 486, 486, 486, 485, 485, 485, 484, 484, 483, 483, 483, 483, 483, 482, 482, 482, 481, 481, 481, 481, 480, 480, 480, 479, 479, 478, 477, 477, 476, 475, 474, 474, 474, 473, 472, 471, 471, 470, 470, 469, 468, 468, 467, 466, 465, 463, 463, 462, 460, 460, 459, 458, 456, 455, 453, 452, 450, 449, 448, 446, 445, 443, 441, 440, 438, 434, 433, 431, 430, 428, 426, 424, 421, 419, 417, 409, 405, 400, 392, 389, 385, 384, 380, 376, 372, 368, 364, 361, 358, 357, 355, 352, 346, 345, 340, 336, 332, 328, 327, 324, 320, 317, 314, 312, 309, 308, 307, 304, 303, 302, 299, 298, 296, 295, 294, 292, 292, 289, 288, 286, 286, 286, 286, 286, 284, 284, 284, 283, 283, 283, 281, 281, 281, 280, 280, 280, 279, 279, 279, 278, 278, 278, 277, 277, 277, 276, 276, 276, 275, 275, 275, 274, 274, 274, 273, 273, 273, 272, 272, 272, 270, 270, 270, 269, 269, 269, 268, 268, 268, 267, 267, 267, 267, 267, 267, 266, 266, 266, 265, 265, 265, 264, 264, 264, 264, 264, 264, 262, 262, 262, 261, 261, 261, 261, 261, 261, 261, 260, 260, 260, 260, 260, 260, 259, 259, 259, 258, 258, 258, 258, 258, 258, 258, 257, 257, 257, 256, 256, 255, 254, 254, 253, 253, 252, 252, 252, 251, 251, 251, 250, 250, 250, 250, 249, 249, 249, 249, 249, 249, 248, 248, 248, 248, 248, 248, 248, 248, 248, 248]
		Aarrayy2=[795, 793, 792, 790, 788, 786, 784, 783, 782, 781, 779, 778, 776, 775, 773, 772, 770, 768, 766, 766, 764, 763, 762, 761, 760, 759, 758, 757, 756, 755, 754, 753, 753, 752, 751, 750, 749, 749, 748, 747, 747, 746, 745, 744, 744, 744, 743, 742, 742, 741, 741, 740, 739, 739, 738, 738, 737, 737, 737, 736, 736, 736, 736, 735, 735, 735, 735, 735, 735, 735, 735, 736, 736, 736, 736, 736, 736, 736, 736, 736, 736, 736, 736, 736, 736, 736, 736, 736, 736, 736, 736, 735, 735, 734, 734, 734, 734, 734, 733, 733, 733, 732, 732, 732, 732, 731, 731, 730, 730, 729, 729, 728, 727, 727, 726, 726, 725, 724, 724, 723, 722, 721, 720, 720, 719, 719, 717, 716, 715, 714, 713, 712, 712, 711, 710, 707, 706, 705, 703, 702, 700, 699, 697, 696, 695, 694, 692, 690, 689, 688, 687, 685, 685, 684, 683, 682, 681, 681, 679, 679, 678, 677, 677, 676, 675, 675, 673, 672, 671, 670, 669, 669, 669, 667, 667, 666, 665, 664, 664, 663, 662, 662, 662, 661, 660, 660, 659, 659, 658, 658, 657, 657, 657, 656, 656, 656, 656, 655, 654, 654, 654, 654, 653, 653, 653, 652, 652, 652, 652, 651, 651, 651, 650, 650, 650, 650, 649, 649, 649, 649, 648, 647, 646, 646, 646, 645, 645, 645, 645, 644, 644, 644, 644, 644, 644, 644, 644, 644, 644, 644, 644, 644, 644, 644, 644, 644, 644, 644, 644, 644, 644, 644, 644, 644, 643, 643, 643, 643, 643, 643, 643, 643, 643, 643, 643, 643, 643, 643, 643, 643, 643, 643, 643, 643, 643, 644, 644, 644, 644, 644, 644, 644, 645, 645, 645, 645, 645, 645, 645, 646, 646, 646, 646, 646, 646, 646, 646, 647, 647, 647, 647, 648, 648, 648, 648, 648, 648, 648, 648, 648, 648, 648, 648, 648, 648, 648, 648, 648, 648, 649, 649, 649, 649, 649, 649, 650, 650, 650, 651, 651, 651, 651, 651, 652, 652, 653, 653, 653, 653, 653, 653, 654, 654, 654, 654, 654, 654, 654, 654, 654, 655, 655, 655, 655, 655, 656, 656, 656, 656, 657, 657, 657, 658, 658, 658, 659, 659, 659, 660, 660, 660, 661, 661, 661, 661, 661, 662, 662, 662, 662, 662, 662, 662, 662, 662, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 663, 662, 662, 662, 662, 661, 661, 661, 660, 660, 660, 660, 659, 659, 659, 659, 659, 658, 658, 658, 658, 657, 657, 657, 657, 657, 657, 657, 657, 657, 657, 657, 656, 656, 656, 656, 655, 655, 655, 655, 655, 654, 654, 654, 653, 653, 652, 651, 651, 651, 650, 649, 649, 648, 647, 646, 646, 646, 645, 645, 644, 643, 643, 642, 641, 640, 639, 639, 638, 637, 636, 635, 634, 634, 634, 632, 631, 630, 629, 629, 628, 627, 626, 624, 622, 621, 620, 618, 618, 618, 618, 617, 617, 616, 615, 614, 612, 611, 609, 608, 606, 605, 604, 602, 601, 599, 598, 596, 595, 593, 592, 590, 589, 588, 587, 586, 585, 582, 582, 580, 579, 577, 576, 574, 573, 573, 572, 571, 570, 569, 569, 568, 567, 566, 566, 565, 564, 564, 563, 563, 562, 561, 560, 560, 560, 560, 558, 558, 557, 557, 556, 555, 554, 554, 553, 553, 553, 552, 552, 551, 550, 550, 549, 549, 549, 548, 547, 547, 546, 546, 546, 545, 545, 544, 544, 544, 543, 543, 542, 542, 542, 541, 541, 541, 540, 540, 540, 539, 539, 539, 539, 539, 538, 538, 538, 538, 538, 537, 537, 537, 537, 537, 537, 537, 537, 536, 536, 536, 536, 536, 535, 535, 535, 535, 535, 534, 534, 534, 534, 534, 533, 533, 533, 533, 533, 533, 533, 533, 533, 532, 532, 532, 532, 532, 531, 531, 531, 531, 531, 531, 530, 530, 530, 530, 530, 530, 530, 530, 530, 530, 530, 530, 530, 530, 530, 530, 530, 530, 530, 530, 530, 530, 530, 530, 529, 529, 529, 529, 529, 529, 529, 529, 528, 528, 528, 527, 527, 527, 526, 526, 526, 526, 526, 526, 525, 525, 525, 525, 524, 524, 524, 349, 341, 339, 523, 357, 337, 523, 364, 335, 522, 372, 333, 522, 376, 331, 522, 381, 329, 521, 383, 328, 520, 387, 327, 394, 393, 326, 519, 401, 325, 519, 407, 324, 518, 410, 321, 517, 412, 320, 516, 415, 318, 515, 418, 317, 515, 420, 315, 513, 421, 315, 512, 423, 313, 512, 426, 312, 511, 429, 311, 509, 433, 310, 508, 434, 309, 506, 437, 307, 496, 495, 439, 307, 492, 441, 306, 487, 442, 305, 479, 444, 305, 475, 446, 304, 471, 447, 303, 463, 460, 449, 302, 453, 301, 301, 300, 299, 299, 299, 298, 298, 298, 297, 297, 297, 297, 297, 296, 296, 296, 295, 295, 295, 295, 295, 295, 295, 294, 294, 294, 294, 294, 294, 294, 294, 294, 294, 294]
		Barrayx1=[313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 323, 324, 325, 326, 327, 329, 330, 331, 333, 335, 336, 337, 339, 340, 341, 342, 344, 344, 344, 342, 342, 341, 341, 340, 340, 340, 340, 341, 342, 344, 346, 347, 349, 350, 352, 354, 356, 357, 359, 360, 362, 364, 365, 366, 368, 370, 371, 374, 375, 377, 379, 382, 383, 384, 386, 388, 389, 391, 393, 395, 397, 398, 400, 402, 403, 405, 407, 408, 412, 414, 418, 420, 422, 424, 426, 429, 433, 435, 436, 438, 443, 445, 446, 455, 457, 458, 460, 462, 464, 466, 468, 470, 472, 476, 479, 481, 483, 485, 489, 491, 495, 497, 500, 502, 505, 507, 508, 510, 512, 514, 516, 518, 519, 521, 523, 525, 527, 529, 530, 531, 533, 534, 535, 537, 538, 539, 541, 542, 543, 544, 545, 546, 548, 549, 551, 553, 554, 555, 557, 558, 559, 562, 563, 564, 565, 566, 567, 568, 570, 571, 573, 575, 576, 577, 578, 579, 581, 582, 583, 585, 587, 588, 590, 591, 592, 594, 595, 596, 598, 599, 600, 601, 602, 603, 604, 606, 608, 609, 611, 612, 613, 614, 616, 617, 618, 619, 620, 621, 622, 623, 624, 626, 627, 628, 629, 630, 631, 632, 633, 636, 637, 639, 640, 642, 643, 644, 645, 646, 647, 648, 649, 651, 652, 653, 654, 655, 656, 657, 660, 661, 662, 665, 666, 667, 668, 669, 671, 672, 673, 675, 676, 678, 679, 681, 682, 683, 684, 685, 686, 688, 689, 691, 692, 694, 695, 697, 698, 700, 701, 703, 704, 707, 708, 710, 711, 712, 714, 715, 717, 718, 722, 723, 725, 726, 727, 728, 730, 731, 732, 733, 734, 735, 736, 737, 738, 739, 740, 741, 742, 743, 744, 745, 747, 748, 749, 750, 751, 753, 754, 755, 756, 757, 758, 759, 762, 763, 765, 766, 768, 769, 771, 772, 775, 777, 778, 779, 780, 781, 782, 783, 785, 786, 788, 789, 790, 791, 792, 793, 794, 795, 796, 797, 798, 799, 800]
		Barrayy1=[1, 2, 3, 4, 5, 7, 9, 10, 12, 14, 15, 17, 19, 20, 21, 24, 26, 27, 30, 34, 36, 37, 45, 47, 52, 56, 75, 80, 82, 96, 100, 103, 105, 109, 113, 118, 119, 125, 128, 134, 138, 139, 143, 144, 149, 152, 155, 157, 160, 162, 165, 169, 169, 171, 173, 174, 175, 177, 178, 179, 181, 182, 182, 183, 184, 185, 185, 186, 187, 188, 189, 190, 191, 191, 192, 193, 193, 193, 194, 195, 195, 196, 196, 196, 196, 196, 196, 196, 196, 196, 195, 195, 195, 194, 193, 193, 193, 192, 192, 192, 192, 191, 190, 190, 189, 188, 188, 187, 185, 185, 183, 183, 181, 180, 179, 178, 177, 176, 174, 173, 171, 169, 168, 166, 164, 162, 159, 156, 155, 153, 150, 148, 147, 143, 141, 141, 136, 135, 133, 131, 130, 127, 122, 120, 115, 110, 108, 106, 101, 100, 98, 92, 89, 87, 84, 81, 80, 77, 73, 71, 68, 65, 63, 62, 61, 60, 57, 55, 54, 52, 49, 48, 47, 46, 45, 43, 42, 41, 40, 40, 39, 38, 37, 36, 35, 34, 32, 32, 30, 30, 29, 28, 28, 27, 27, 26, 26, 26, 25, 25, 25, 24, 24, 23, 23, 23, 22, 22, 22, 21, 21, 20, 20, 19, 19, 19, 19, 18, 18, 18, 17, 17, 17, 17, 17, 16, 16, 16, 15, 15, 15, 14, 14, 14, 14, 14, 13, 13, 13, 13, 13, 13, 12, 12, 12, 12, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 12, 12, 13, 13, 13, 14, 14, 14, 15, 15, 16, 16, 16, 17, 17, 17, 18, 19, 19, 20, 20, 20, 21, 21, 21, 21, 22, 22, 22, 22, 22, 23, 23, 24, 24, 25, 25, 25, 26, 26, 26, 26, 27, 27, 28, 28, 28, 28]
		Barrayy2=[165, 168, 168, 170, 171, 172, 173, 175, 176, 177, 178, 179, 180, 182, 183, 184, 186, 186, 188, 189, 190, 191, 192, 193, 193, 194, 195, 195, 195, 194, 194, 193, 193, 193, 193, 193, 193, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 202, 203, 204, 205, 206, 207, 208, 208, 209, 210, 211, 211, 212, 213, 214, 214, 215, 215, 216, 216, 217, 217, 217, 218, 218, 218, 219, 219, 219, 219, 220, 220, 221, 221, 222, 222, 222, 222, 222, 222, 223, 223, 223, 223, 223, 223, 223, 223, 223, 223, 223, 223, 223, 223, 223, 223, 223, 223, 222, 221, 221, 219, 219, 217, 216, 216, 215, 214, 214, 213, 213, 212, 211, 211, 210, 209, 209, 208, 208, 207, 206, 205, 205, 204, 204, 203, 202, 202, 201, 201, 200, 200, 199, 198, 198, 197, 196, 194, 192, 192, 191, 189, 188, 187, 185, 184, 183, 182, 181, 180, 178, 177, 176, 174, 173, 171, 171, 170, 168, 167, 166, 164, 162, 161, 159, 157, 156, 154, 152, 151, 150, 147, 146, 144, 143, 142, 141, 140, 137, 135, 134, 132, 130, 129, 127, 125, 123, 122, 122, 120, 120, 119, 118, 117, 114, 113, 111, 110, 109, 108, 107, 105, 103, 102, 100, 99, 98, 96, 95, 94, 93, 92, 91, 90, 88, 87, 86, 85, 84, 83, 83, 80, 80, 79, 77, 76, 76, 76, 74, 74, 73, 73, 72, 71, 70, 69, 69, 68, 68, 68, 67, 67, 67, 66, 66, 65, 65, 64, 64, 63, 63, 63, 63, 63, 62, 62, 62, 62, 62, 62, 62, 61, 61, 61, 60, 60, 60, 60, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 59, 60, 60, 60, 60, 60, 60, 60, 60, 60, 60, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 61, 62, 63, 64]
		oldxt=99999
		oldyt=99999
		objects=[]
		towers=[]
		hover=[]
		projectiles=[]
		explosions=[]
		zaps=[]
		multizap=[]
		flash=0
		justdone=false
		gs=40
		ts=60
		angle=0
		round=0
		coOrdinateArray2=[]
		coOrdinateArray=[]
		globalspeed=1.5
		globalspeedcheck=1.5
		Oid=0
		drawcircle=false
		gavemoney=false
		mouseX=0
		mouseY=0
		textColour="purple"
		startY=400+gs/2
		startX=-50
		health=100
		money=700
		upgrades=[]
		projectileV=5
		updated=1
		pickup=false
		drawmenu=false
		stop=false
		openupgradesmenu=false
		//listeners
		canvas.addEventListener('mouseup', mousepressU)
		canvas.addEventListener('mousedown', mousepressD)
		canvas.addEventListener('mousemove', mousepos)
		document.addEventListener('keyup', keydown)
		//enemies
		Pred={picture:red,x:startX,y:startY,speed:0.6,source:"RedT.png",direction:"right",tier:1,size:1,score:0,health:1,poison:false}
		Pblue={picture:blue,x:startX,y:startY,speed:1,source:"BlueT.png",direction:"right",tier:2,size:1.1,score:0,health:1,poison:false}
		Pgreen={picture:green,x:startX,y:startY,speed:1.4,source:"GreenT.png",direction:"right",tier:3,size:1.2,score:0,health:1,poison:false}
		Pyellow={picture:yellow,x:startX,y:startY,speed:1.8,source:"YellowT.png",direction:"right",tier:4,size:1.3,score:0,health:1,poison:false}
		Ppink={picture:pink,x:startX,y:startY,speed:2.2,source:"PinkT.png",direction:"right",tier:5,size:1.4,score:0,health:1,poison:false}
		Pblack={picture:black,x:startX,y:startY,speed:1.4,source:"BlackT.png",direction:"right",tier:6,size:0.8,score:0,health:1,poison:false}
		Ppurple={picture:purple,x:startX,y:startY,speed:1.4,source:"purpleT.png",direction:"right",tier:7,size:0.8,score:0,health:1,poison:false}
		Ppurack={picture:purack,x:startX,y:startY,speed:1.8,source:"purackT.png",direction:"right",tier:8,size:1.25,score:0,health:1,poison:false}
		Psand={picture:sand,x:startX,y:startY,speed:0.9,source:"sandt.png",direction:"right",tier:13,size:1.3,score:0,health:1,poison:false}
		Pbaije={picture:baije,x:startX,y:startY,speed:1.2,source:"baijeP.png",direction:"right",tier:9,size:2.1,score:0,health:12}
		Pcyan={picture:cyan,x:startX,y:startY,speed:0.9,source:"cyanP.png",direction:"right",tier:10,size:2.4,score:0,health:50}
		Porange={picture:orange,x:startX,y:startY,speed:0.6,source:"orangeP.png",direction:"right",tier:11,size:2.7,score:0,health:195}
		Pwhite={picture:white,x:startX,y:startY,speed:0.3,source:"whiteP.png",direction:"right",tier:12,size:3,score:0,health:565}
		bplane={picture:pblack,x:startX,y:startY,speed:0.1,source:"bplane.png",direction:"right",tier:14,size:3.3,score:0,health:2000}
		function boom(projectiles,k){
			for(g=objects.length;g>=0;g--){
				if(objects[g]!==undefined){
					stop=false
					xs=objects[g].x-projectiles[k].x+20
					ys=objects[g].y-projectiles[k].y+20
					distance=Math.sqrt(Math.pow(xs,2)+Math.pow(ys,2))
					if(distance<projectiles[k].boom&&objects[g].x>-20&&objects[g].y>-20){
						for(i=0;i<projectiles[k].hit.length;i++){
							if(projectiles[k].hit[i]==objects[g].id){
								stop=true
							}
						}
						if(!stop){
							money+=1
							projectiles[k].hit.push(objects[g].id)
							if(objects[g].tier==1){
								objects.splice(g,1)
							}
							else if(objects[g].tier==2){
								objects.push({picture:red,x:objects[g].x,y:objects[g].y,level:"red",speed:0.6,direction:objects[g].direction,score:objects[g].score,tier:1,id:objects[g].id,size:1,
								source:"RedT.png",poison:objects[g].poison})
								objects.splice(g,1)
							}
							else if(objects[g].tier==3){
								objects.push({picture:blue,x:objects[g].x,y:objects[g].y,level:"blue",speed:1,direction:objects[g].direction,score:objects[g].score,tier:2,id:objects[g].id,size:1.1,
								source:"BlueT.png",poison:objects[g].poison})
								objects.splice(g,1)
							}
							else if(objects[g].tier==4){
								objects.push({picture:green,x:objects[g].x,y:objects[g].y,level:"green",speed:1.4,direction:objects[g].direction,score:objects[g].score,tier:3,id:objects[g].id,size:1.2,
								source:"GreenT.png",poison:objects[g].poison})
								objects.splice(g,1)
							}
							else if(objects[g].tier==5){
								objects.push({picture:yellow,x:objects[g].x,y:objects[g].y,level:"yellow",speed:1.8,direction:objects[g].direction,score:objects[g].score,tier:4,id:objects[g].id,
								size:1.3,source:"YellowT.png",poison:objects[g].poison})
								objects.splice(g,1)
							}
							else if(objects[g].tier==7){
								Oid++
								projectiles[k].hit.push(Oid)
								objects.push({picture:pink,x:objects[g].x,y:objects[g].y,level:"pink",speed:2.2,direction:objects[g].direction,score:objects[g].score,tier:5,id:Oid,size:1.4,source:"PinkT.png",
								poison:objects[g].poison},
								{picture:pink,x:objects[g].x,y:objects[g].y,level:"pink",speed:2.2,direction:objects[g].direction,score:objects[g].score,tier:5,id:Oid+1,size:1.4,source:"PinkT.png",
								poison:objects[g].poison})
								Oid++
								projectiles[k].hit.push(Oid)
								objects.splice(g,1)
							}
							else if(objects[g].tier==9){
								if(objects[g].health==0){
									objects.push({picture:purack,x:objects[g].x,y:objects[g].y,level:"purack",speed:1.8,direction:objects[g].direction,score:objects[g].score,tier:8,id:objects[g].id,size:1.25,
									source:"purack.png",poison:objects[g].poison})
									objects.splice(l,1)
								}
								else{
									objects[g].health-=1
									money-=1
								}
							}
							else if(objects[g].tier==13){
								objects.push({picture:yellow,x:objects[g].x,y:objects[g].y,level:"yellow",speed:1.8,direction:objects[g].direction,score:objects[g].score,tier:4,id:objects[g].id,
								size:1.3,source:"YellowT.png",poison:objects[g].poison})
								objects.splice(g,1)
							}
							else if(objects[g].tier==10){
								if(objects[g].health==0){
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:baije,x:objects[g].x,y:objects[g].y,level:"baije",speed:1.2,direction:objects[g].direction,score:objects[g].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:12})
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:baije,x:objects[g].x,y:objects[g].y,level:"baije",speed:1.2,direction:objects[g].direction,score:objects[g].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:12})
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:baije,x:objects[g].x,y:objects[g].y,level:"baije",speed:1.2,direction:objects[g].direction,score:objects[g].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:12})
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:baije,x:objects[g].x,y:objects[g].y,level:"baije",speed:1.2,direction:objects[g].direction,score:objects[g].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:12})
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:baije,x:objects[g].x,y:objects[g].y,level:"baije",speed:1.2,direction:objects[g].direction,score:objects[g].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:12})
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:baije,x:objects[g].x,y:objects[g].y,level:"baije",speed:1.2,direction:objects[g].direction,score:objects[g].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:12})
									objects.splice(l,1)
								}
								else{
									objects[g].health-=1
									money-=1
								}
							}
							else if(objects[g].tier==11){
								if(objects[g].health==0){
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:cyan,x:objects[g].x,y:objects[g].y,level:"cyan",speed:0.9,direction:objects[g].direction,score:objects[g].score,tier:10,id:Oid,size:2.4,source:"cyan.png",health:50})
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:cyan,x:objects[g].x,y:objects[g].y,level:"cyan",speed:0.9,direction:objects[g].direction,score:objects[g].score,tier:10,id:Oid,size:2.4,source:"cyan.png",health:50})
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:cyan,x:objects[g].x,y:objects[g].y,level:"cyan",speed:0.9,direction:objects[g].direction,score:objects[g].score,tier:10,id:Oid,size:2.4,source:"cyan.png",health:50})
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:cyan,x:objects[g].x,y:objects[g].y,level:"cyan",speed:0.9,direction:objects[g].direction,score:objects[g].score,tier:10,id:Oid,size:2.4,source:"cyan.png",health:50})
									objects.splice(l,1)
								}
								else{
									objects[g].health-=1
									money-=1
								}
							}
							else if(objects[g].tier==12){
								if(objects[g].health==0){
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:orange,x:objects[g].x,y:objects[g].y,level:"orange",speed:0.6,direction:objects[g].direction,score:objects[g].score,tier:11,id:Oid,size:2.7,source:"cyan.png",health:195})
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:orange,x:objects[g].x,y:objects[g].y,level:"orange",speed:0.6,direction:objects[g].direction,score:objects[g].score,tier:11,id:Oid,size:2.7,source:"cyan.png",health:195})
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:orange,x:objects[g].x,y:objects[g].y,level:"orange",speed:0.6,direction:objects[g].direction,score:objects[g].score,tier:11,id:Oid,size:2.7,source:"cyan.png",health:195})
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:orange,x:objects[g].x,y:objects[g].y,level:"orange",speed:0.6,direction:objects[g].direction,score:objects[g].score,tier:11,id:Oid,size:2.7,source:"cyan.png",health:195})
									objects.splice(l,1)
								}
								else{
									objects[g].health-=1
									money-=1
								}
							}
							else if(objects[g].tier==14){
								if(objects[g].health==0){
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:white,x:objects[l].x,y:objects[l].y,level:"white",speed:0.3,direction:objects[l].direction,score:objects[l].score,tier:12,id:Oid,size:3,source:"white.png",health:565})
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:white,x:objects[l].x,y:objects[l].y,level:"white",speed:0.3,direction:objects[l].direction,score:objects[l].score,tier:12,id:Oid,size:3,source:"white.png",health:565})
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:white,x:objects[l].x,y:objects[l].y,level:"white",speed:0.3,direction:objects[l].direction,score:objects[l].score,tier:12,id:Oid,size:3,source:"white.png",health:565})
									Oid++
									projectiles[k].hit.push(Oid)
									objects.push({picture:white,x:objects[l].x,y:objects[l].y,level:"white",speed:0.3,direction:objects[l].direction,score:objects[l].score,tier:12,id:Oid,size:3,source:"white.png",health:565})
									objects.splice(l,1)
								}
								else{
									objects[l].health-=1
									money-=1
								}
							}
						}
					}
				}
			}
		}
		function shoot(projectiles,objects,k,l){
			if(projectiles[k].hit!==undefined){
				projectiles[k].hit.push(objects[l].id)
				projectiles[k].pierce-=1
			}
			if(!projectiles[k].poison){
				money+=1
			}
			if(projectiles[k].poison){
				passpoison=[]
				for(i=0;i<projectiles[k].poison.length;i++){
					passpoison.push(projectiles[k].poison[i])
				}
			}
			if(objects[l].tier==1){
				if(!projectiles[k].poison){
					objects.splice(l,1)
				}
				if(projectiles[k].poison&&!objects[l].poison){
					objects[l].poison=passpoison
				}
				else if(projectiles[k].poison&&objects[l].poison){
					projectiles[k].pierce+=1
				}
			}
			else if(objects[l].tier==2){
				if(!projectiles[k].poison){
					objects.push({picture:red,x:objects[l].x,y:objects[l].y,level:"red",speed:0.6,direction:objects[l].direction,score:objects[l].score,tier:1,id:objects[l].id,size:1,source:"RedT.png",
					poison:objects[l].poison})
					objects.splice(l,1)
				}
				if(projectiles[k].poison&&!objects[l].poison){
					objects[l].poison=passpoison
				}
				else if(projectiles[k].poison&&objects[l].poison){
					projectiles[k].pierce+=1
				}
			}
			else if(objects[l].tier==3){
				if(!projectiles[k].poison){
					objects.push({picture:blue,x:objects[l].x,y:objects[l].y,level:"blue",speed:1,direction:objects[l].direction,score:objects[l].score,tier:2,id:objects[l].id,size:1.1,source:"BlueT.png",
					poison:objects[l].poison})
					objects.splice(l,1)
				}
				if(projectiles[k].poison&&!objects[l].poison){
					objects[l].poison=passpoison
				}
				else if(projectiles[k].poison&&objects[l].poison){
					projectiles[k].pierce+=1
				}
			}
			else if(objects[l].tier==4){
				if(!projectiles[k].poison){
					objects.push({picture:green,x:objects[l].x,y:objects[l].y,level:"green",speed:1.4,direction:objects[l].direction,score:objects[l].score,tier:3,id:objects[l].id,size:1.2,source:"GreenT.png",
					poison:objects[l].poison})
					objects.splice(l,1)
				}
				if(projectiles[k].poison&&!objects[l].poison){
					objects[l].poison=passpoison
				}
				if(projectiles[k].poison&&objects[l].poison){
					projectiles[k].pierce+=1
				}
			}
			else if(objects[l].tier==5){
				if(!projectiles[k].poison){
					objects.push({picture:yellow,x:objects[l].x,y:objects[l].y,level:"yellow",speed:1.4,direction:objects[l].direction,score:objects[l].score,tier:4,id:objects[l].id,size:1.3,source:"YellowT.png",
					poison:objects[l].poison})
					objects.splice(l,1)
				}
				if(projectiles[k].poison&&!objects[l].poison){
					objects[l].poison=passpoison
				}
				else if(projectiles[k].poison&&objects[l].poison){
					projectiles[k].pierce+=1
				}
			}
			else if(objects[l].tier==6&&projectiles[k].popblacks){
				if(!projectiles[k].poison){
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:pink,x:objects[l].x,y:objects[l].y,level:"pink",speed:1.8,direction:objects[l].direction,score:objects[l].score,tier:5,id:Oid,size:1.4,source:"PinkT.png",
					poison:objects[l].poison})
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:pink,x:objects[l].x,y:objects[l].y,level:"pink",speed:1.8,direction:objects[l].direction,score:objects[l].score,tier:5,id:Oid+1,size:1.4,source:"PinkT.png",
					poison:objects[l].poison})
					objects.splice(l,1)
				}
				if(projectiles[k].poison&&!objects[l].poison){
					objects[l].poison=passpoison
				}
				else if(projectiles[k].poison&&objects[l].poison){
					projectiles[k].pierce+=1
				}
			}
			else if(objects[l].tier==7&&!projectiles[k].poison){
				Oid++
				projectiles[k].hit.push(Oid)
				objects.push({picture:pink,x:objects[l].x,y:objects[l].y,level:"pink",speed:1.8,direction:objects[l].direction,score:objects[l].score,tier:5,id:Oid,size:1.4,source:"PinkT.png",
				poison:objects[l].poison})
				Oid++
				projectiles[k].hit.push(Oid)
				objects.push({picture:pink,x:objects[l].x,y:objects[l].y,level:"pink",speed:1.8,direction:objects[l].direction,score:objects[l].score,tier:5,id:Oid+1,size:1.4,source:"PinkT.png",
				poison:objects[l].poison})
				objects.splice(l,1)
			}
			else if(objects[l].tier==8&&projectiles[k].popblacks&&!projectiles[k].poison){
				Oid++
				projectiles[k].hit.push(Oid)
				objects.push({picture:purple,x:objects[l].x,y:objects[l].y,level:"purple",speed:1.4,direction:objects[l].direction,score:objects[l].score,tier:7,id:Oid,size:0.8,source:"purpleT.png",poison:false,})
				Oid++
				projectiles[k].hit.push(Oid)
				objects.push({picture:black,x:objects[l].x,y:objects[l].y,level:"black",speed:1.4,direction:objects[l].direction,score:objects[l].score,tier:6,id:Oid+1,size:0.8,source:"BlackT.png",poison:false,})
				objects.splice(l,1)
			}
			else if(objects[l].tier==9){
				if(objects[l].health==0){
					objects.push({picture:purack,x:objects[l].x,y:objects[l].y,level:"purack",speed:1.8,direction:objects[l].direction,score:objects[l].score,tier:8,id:objects[l].id,size:1.25,source:"purack.png",poison:false})
					objects.splice(l,1)
				}
				else{
					objects[l].health-=1
					money-=1
				}
			}
			else if(objects[l].tier==10){
				if(objects[l].health==0){
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:baije,x:objects[l].x,y:objects[l].y,level:"baije",speed:1.2,direction:objects[l].direction,score:objects[l].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:12})
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:baije,x:objects[l].x,y:objects[l].y,level:"baije",speed:1.2,direction:objects[l].direction,score:objects[l].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:12})
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:baije,x:objects[l].x,y:objects[l].y,level:"baije",speed:1.2,direction:objects[l].direction,score:objects[l].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:12})
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:baije,x:objects[l].x,y:objects[l].y,level:"baije",speed:1.2,direction:objects[l].direction,score:objects[l].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:12})
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:baije,x:objects[l].x,y:objects[l].y,level:"baije",speed:1.2,direction:objects[l].direction,score:objects[l].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:12})
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:baije,x:objects[l].x,y:objects[l].y,level:"baije",speed:1.2,direction:objects[l].direction,score:objects[l].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:12})
					objects.splice(l,1)
				}
				else{
					objects[l].health-=1
					money-=1
				}
			}
			else if(objects[l].tier==11){
				if(objects[l].health==0){
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:cyan,x:objects[l].x,y:objects[l].y,level:"cyan",speed:0.9,direction:objects[l].direction,score:objects[l].score,tier:10,id:Oid,size:2.4,source:"cyan.png",health:50})
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:cyan,x:objects[l].x,y:objects[l].y,level:"cyan",speed:0.9,direction:objects[l].direction,score:objects[l].score,tier:10,id:Oid,size:2.4,source:"cyan.png",health:50})
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:cyan,x:objects[l].x,y:objects[l].y,level:"cyan",speed:0.9,direction:objects[l].direction,score:objects[l].score,tier:10,id:Oid,size:2.4,source:"cyan.png",health:50})
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:cyan,x:objects[l].x,y:objects[l].y,level:"cyan",speed:0.9,direction:objects[l].direction,score:objects[l].score,tier:10,id:Oid,size:2.4,source:"cyan.png",health:50})
					objects.splice(l,1)
				}
				else{
					objects[l].health-=1
					money-=1
				}
			}
			else if(objects[l].tier==12){
				if(objects[l].health==0){
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:orange,x:objects[l].x,y:objects[l].y,level:"orange",speed:0.6,direction:objects[l].direction,score:objects[l].score,tier:11,id:Oid,size:2.7,source:"cyan.png",health:195})
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:orange,x:objects[l].x,y:objects[l].y,level:"orange",speed:0.6,direction:objects[l].direction,score:objects[l].score,tier:11,id:Oid,size:2.7,source:"cyan.png",health:195})
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:orange,x:objects[l].x,y:objects[l].y,level:"orange",speed:0.6,direction:objects[l].direction,score:objects[l].score,tier:11,id:Oid,size:2.7,source:"cyan.png",health:195})
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:orange,x:objects[l].x,y:objects[l].y,level:"orange",speed:0.6,direction:objects[l].direction,score:objects[l].score,tier:11,id:Oid,size:2.7,source:"cyan.png",health:195})
					objects.splice(l,1)
				}
				else{
					objects[l].health-=1
					money-=1
				}
			}
			else if(objects[l].tier==14){
				if(objects[l].health==0){
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:white,x:objects[l].x,y:objects[l].y,level:"white",speed:0.3,direction:objects[l].direction,score:objects[l].score,tier:12,id:Oid,size:3,source:"white.png",health:565})
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:white,x:objects[l].x,y:objects[l].y,level:"white",speed:0.3,direction:objects[l].direction,score:objects[l].score,tier:12,id:Oid,size:3,source:"white.png",health:565})
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:white,x:objects[l].x,y:objects[l].y,level:"white",speed:0.3,direction:objects[l].direction,score:objects[l].score,tier:12,id:Oid,size:3,source:"white.png",health:565})
					Oid++
					projectiles[k].hit.push(Oid)
					objects.push({picture:white,x:objects[l].x,y:objects[l].y,level:"white",speed:0.3,direction:objects[l].direction,score:objects[l].score,tier:12,id:Oid,size:3,source:"white.png",health:565})
					objects.splice(l,1)
				}
				else{
					objects[l].health-=1
					money-=1
				}
			}
			else if(objects[l].tier==13){
				if(projectiles[k].popsandbags){
					objects.push({picture:yellow,x:objects[l].x,y:objects[l].y,level:"yellow",speed:1.8,direction:objects[l].direction,score:objects[l].score,tier:4,id:objects[l].id,
					size:1.3,source:"YellowT.png",poison:objects[l].poison})
					objects.splice(l,1)
				}
				else{
					money-=1
				}
			}
			if(projectiles[k].boom){
				explosions.push({x:projectiles[k].x,y:projectiles[k].y,width:projectiles[k].boom*2,height:projectiles[k].boom*2,time:10,div:10})
				boom(projectiles,k)
			}
			if(projectiles[k].pierce==0){
				projectiles.splice(k,1)
			}
		}
		function startRound(){
			if(round==1){
				enemies=[{enemy:Pred,number:20,spacing:100,delay:0}]
				summon()
			}
			if(round==2){
				enemies=[{enemy:Pred,number:40,spacing:50,delay:0}]
				summon()
			}
			if(round==3){
				enemies=[{enemy:Pred,number:25,spacing:70,delay:0},
				{enemy:Pblue,number:5,spacing:100,delay:100}]
				summon()
			}
			if(round==4){
				enemies=[{enemy:Pred,number:35,spacing:30,delay:200},
				{enemy:Pblue,number:18,spacing:90,delay:0}]
				summon()
			}
			if(round==5){
				enemies=[{enemy:Pred,number:5,spacing:40,delay:50},
				{enemy:Pblue,number:27,spacing:70,delay:0}]
				summon()
			}
			if(round==6){
				enemies=[{enemy:Pred,number:15,spacing:50,delay:0},
				{enemy:Pblue,number:15,spacing:50,delay:50},
				{enemy:Pgreen,number:5,spacing:100,delay:200}]
				summon()
			}
			if(round==7){
				enemies=[{enemy:Pred,number:25,spacing:50,delay:0},
				{enemy:Pblue,number:25,spacing:50,delay:50},
				{enemy:Pgreen,number:8,spacing:100,delay:200}]
				summon()
			}
			if(round==8){
				enemies=[{enemy:Pred,number:30,spacing:50,delay:0},
				{enemy:Pblue,number:20,spacing:50,delay:10},
				{enemy:Pgreen,number:20,spacing:100,delay:100}]
				summon()
			}
			if(round==9){
				enemies=[{enemy:Pblue,number:25,spacing:50,delay:0},
				{enemy:Pgreen,number:45,spacing:90,delay:100}]
				summon()
			}
			if(round==10){
				enemies=[{enemy:Pblue,number:105,spacing:35,delay:0}]
				summon()
			}
			if(round==11){
				enemies=[{enemy:Pred,number:12,spacing:50,delay:0,
				enemy:Pblue,number:16,spacing:40,delay:10,
				enemy:Pgreen,number:16,spacing:50,delay:200},
				{enemy:Pyellow,number:6,spacing:200,delay:400}]
				summon()
			}
			if(round==12){
				enemies=[{enemy:Pblue,number:26,spacing:40,delay:0,
				enemy:Pgreen,number:22,spacing:50,delay:200},
				{enemy:Pyellow,number:8,spacing:200,delay:400}]
				summon()
			}
			if(round==13){
				enemies=[{enemy:Pblue,number:50,spacing:30,delay:0,
					enemy:Pgreen,number:30,spacing:50,delay:250}]
				summon()
			}
			if(round==14){
				enemies=[{enemy:Pred,number:32,spacing:20,delay:0,
				enemy:Pblue,number:46,spacing:40,delay:10,
				enemy:Pgreen,number:36,spacing:50,delay:200},
				{enemy:Pyellow,number:16,spacing:100,delay:300}]
				summon()
			}
			if(round==15){
				enemies=[{enemy:Pyellow,number:20,spacing:100,delay:0},
				{enemy:Pgreen,number:60,spacing:70,delay:500},
				{enemy:Pblue,number:90,spacing:30,delay:1000},
				{enemy:Ppink,number:12,spacing:130,delay:1500}]
				summon()
			}
			if(round==16){
				enemies=[{enemy:Pyellow,number:20,spacing:50,delay:100},
				{enemy:Pgreen,number:60,spacing:30,delay:0}]
				summon()
			}
			if(round==17){
				enemies=[{enemy:Ppink,number:30,spacing:150,delay:0}]
				summon()
			}
			if(round==18){
				enemies=[{enemy:Pgreen,number:80,spacing:20,delay:0}]
				summon()
			}
			if(round==19){
				enemies=[{enemy:Ppink,number:30,spacing:50,delay:0},
				{enemy:Pyellow,number:40,spacing:50,delay:300},
				{enemy:Pgreen,number:70,spacing:30,delay:200}]
				summon()
			}
			if(round==20){
				enemies=[{enemy:Pblack,number:6,spacing:150,delay:0}]
				summon()
			}
			if(round==21){
				enemies=[{enemy:Ppink,number:65,spacing:50,delay:200},
				{enemy:Pyellow,number:40,spacing:40,delay:000}]
				summon()
			}
			if(round==22){
				enemies=[{enemy:Ppurple,number:16,spacing:110,delay:0}]
				summon()
			}
			if(round==23){
				enemies=[{enemy:Ppurple,number:16,spacing:110,delay:0},
				{enemy:Pblack,number:16,spacing:110,delay:1700}]
				summon()
			}
			if(round==24){
				enemies=[{enemy:Ppurple,number:26,spacing:110,delay:0},
				{enemy:Pblack,number:26,spacing:110,delay:300},
				{enemy:Ppink,number:65,spacing:50,delay:200}]
				summon()
			}
			if(round==25){
				enemies=[{enemy:Ppurack,number:5,spacing:150,delay:0},
				{enemy:Ppink,number:65,spacing:50,delay:200}]
				summon()
			}
			if(round==26){
				enemies=[{enemy:Ppurack,number:10,spacing:150,delay:0},
				{enemy:Ppink,number:20,spacing:50,delay:500}]
				summon()
			}
			if(round==27){
				enemies=[{enemy:Psand,number:5,spacing:200,delay:0}]
				summon()
			}
			if(round==28){
				enemies=[{enemy:Ppurple,number:36,spacing:90,delay:0},
				{enemy:Pblack,number:36,spacing:90,delay:600},
				{enemy:Ppink,number:85,spacing:80,delay:0}]
				summon()
			}
			if(round==29){
				enemies=[{enemy:Psand,number:9,spacing:100,delay:0}]
				summon()
			}
			if(round==30){
				enemies=[{enemy:Ppurack,number:20,spacing:150,delay:0},
				{enemy:Psand,number:8,spacing:100,delay:0}]
				summon()
			}
			if(round==31){
				enemies=[{enemy:Ppurack,number:8,spacing:150,delay:0},
				{enemy:Pblack,number:35,spacing:90,delay:1200},
				{enemy:Ppurple,number:45,spacing:80,delay:2400}]
				summon()
			}
			if(round==32){
				enemies=[{enemy:Ppurack,number:20,spacing:150,delay:1000},
				{enemy:Pred,number:38,spacing:100,delay:0},
				{enemy:Pblue,number:58,spacing:100,delay:500}]
				summon()
			}
			if(round==33){
				enemies=[{enemy:Ppurack,number:20,spacing:150,delay:1000},
				{enemy:Pyellow,number:150,spacing:20,delay:0}]
				summon()
			}
			if(round==34){
				enemies=[{enemy:Pbaije,number:2,spacing:500,delay:0}]
				summon()
			}
			if(round==35){
				enemies=[{enemy:Pbaije,number:4,spacing:500,delay:0}]
				summon()
			}
			if(round==36){
				enemies=[{enemy:Ppink,number:161,spacing:5,delay:0},
				{enemy:Ppink,number:161,spacing:5,delay:0}]
				summon()
			}
			if(round==37){
				enemies=[{enemy:Pblack,number:40,spacing:15,delay:0},
				{enemy:Ppurple,number:40,spacing:15,delay:150},
				{enemy:Psand,number:40,spacing:15,delay:300},
				{enemy:Pbaije,number:10,spacing:35,delay:600}]
				summon()
			}
			if(round==38){
				enemies=[{enemy:Pbaije,number:40,spacing:105,delay:0},
					{enemy:Pcyan,number:2,spacing:55,delay:4500}]
				summon()
			}
			if(round==39){
				enemies=[{enemy:Pcyan,number:4,spacing:105,delay:3000},
				{enemy:Ppurack,number:70,spacing:25,delay:150},
				{enemy:Pbaije,number:40,spacing:45,delay:1000},
				{enemy:Psand,number:50,spacing:35,delay:2000}]
				summon()
			}
			if(round==40){
				enemies=[{enemy:Pcyan,number:6,spacing:45,delay:0}]
				summon()
			}
			if(round==41){
				enemies=[{enemy:Pbaije,number:40,spacing:2,delay:0}]
				summon()
			}
			if(round==42){
				enemies=[{enemy:Pbaije,number:100,spacing:2,delay:0}]
				summon()
			}
			if(round==43){
				enemies=[{enemy:Ppink,number:161,spacing:5,delay:0}]
				summon()
			}
			if(round==44){
				enemies=[{enemy:Ppink,number:161,spacing:5,delay:0}]
				summon()
			}
			if(round==45){
				enemies=[{enemy:Ppink,number:161,spacing:5,delay:0}]
				summon()
			}
			if(round==46){
				enemies=[{enemy:Ppink,number:161,spacing:5,delay:0}]
				summon()
			}
			if(round==47){
				enemies=[{enemy:Ppink,number:161,spacing:5,delay:0}]
				summon()
			}
			if(round==48){
				enemies=[{enemy:Ppink,number:161,spacing:5,delay:0}]
				summon()
			}
			if(round==49){
				enemies=[{enemy:Ppink,number:161,spacing:5,delay:0}]
				summon()
			}
			if(round==50){
				enemies=[{enemy:Porange,number:1,spacing:5,delay:0}]
				summon()
			}
			if(round==0){
				setInterval(startMove,10)
			}
		}
		function summon(){
			for(i=0;i<enemies.length;i++){
				for(j=0;j<(enemies[i].number);j++){
					//packing enemies for start
					Oid++
					objects.push({picture:enemies[i].enemy.picture,x:((enemies[i].enemy.x)-(enemies[i].spacing*j)-(enemies[i].delay)),y:startY,speed:enemies[i].enemy.speed,
					direction:enemies[i].enemy.direction,score:(enemies[i].enemy.x)-(enemies[i].spacing*j)-(enemies[i].delay),tier:enemies[i].enemy.tier,id:Oid,size:enemies[i].enemy.size,
					health:enemies[i].enemy.health,poison:enemies[i].enemy.poison})
				}
			}
		}
		//adding the banks
		function bankaddition(){
			bankmoney=0
			for(i=0;i<towers.length;i++){
				if(towers[i].tier==6){
					bankmoney+=towers[i].roundmoney
					actualshowtext="+"+towers[i].roundmoney
					banktext.push({roundmoney:actualshowtext,x:towers[i].x,y:towers[i].y,time:80})
				}
			}
			return(bankmoney)
		}
		function drawobject(objects,i,direction){
			ctx.translate((gs/2+objects[i].x-(objects[i].size/2)),(gs/2+objects[i].y-(objects[i].size/2)));
			ctx.rotate(direction*Math.PI)
			ctx.drawImage(objects[i].picture,-(gs*objects[i].size/2),-(gs*objects[i].size/2),(gs*objects[i].size),(gs*objects[i].size))
			ctx.rotate(direction*Math.PI * ( -1 ) );
			ctx.translate((gs/2+objects[i].x-(objects[i].size/2)) * (-1), (gs/2+objects[i].y-(objects[i].size/2)) * (-1));
			if(objects[i].poison){
				objects[i].poison[0]-=1*globalspeed
				ctx.globalAlpha=0.6
				ctx.translate((gs/2+objects[i].x-(objects[i].size/2)),(gs/2+objects[i].y-(objects[i].size/2)));
				ctx.rotate(direction*Math.PI)
				ctx.drawImage(poison,-(gs*objects[i].size/2),-(gs*objects[i].size/2),(gs*objects[i].size),(gs*objects[i].size))
				ctx.rotate(direction*Math.PI * ( -1 ) );
				ctx.translate((gs/2+objects[i].x-(objects[i].size/2)) * (-1), (gs/2+objects[i].y-(objects[i].size/2)) * (-1));
				ctx.globalAlpha=1
				if(objects[i].poison[0]<=0&&objects[i].poison[1]<=0){
					objects[i].poison=false
				}
			}
		}
		//checkwater
		function checkwater(){
			for(i=0;i<Aarrayx1.length-1;i++){
				if(mouseX+30>Aarrayx1[i]&&mouseX-30<Aarrayx1[i+1]&&mouseY+30>Aarrayy1[i]&&mouseY-30<Aarrayy2[i]){
					return(true)
				}
			}
			for(j=0;j<Barrayx1.length-1;j++){
				if(mouseX>Barrayx1[j]&&mouseX<Barrayx1[j+1]&&mouseY>Barrayy1[j]&&mouseY<Barrayy2[j]){
					return(true)
				}
			}
			return(false)
		}
		function poisonkill(objects,l){
			money+=1
			if(objects[l].tier==1){
				objects.splice(l,1)
			}
			else if(objects[l].tier==2){
				objects.push({picture:red,x:objects[l].x,y:objects[l].y,level:"red",speed:0.6,direction:objects[l].direction,score:objects[l].score,tier:1,id:objects[l].id,size:1,source:"RedT.png",
				poison:objects[l].poison})
				objects.splice(l,1)
			}
			else if(objects[l].tier==3){
				objects.push({picture:blue,x:objects[l].x,y:objects[l].y,level:"blue",speed:1,direction:objects[l].direction,score:objects[l].score,tier:2,id:objects[l].id,size:1.1,source:"BlueT.png",
				poison:objects[l].poison})
				objects.splice(l,1)
			}
			else if(objects[l].tier==4){
				objects.push({picture:green,x:objects[l].x,y:objects[l].y,level:"green",speed:1.4,direction:objects[l].direction,score:objects[l].score,tier:3,id:objects[l].id,size:1.2,source:"GreenT.png",
				poison:objects[l].poison})
				objects.splice(l,1)
			}
			else if(objects[l].tier==5){
				objects.push({picture:yellow,x:objects[l].x,y:objects[l].y,level:"yellow",speed:1.4,direction:objects[l].direction,score:objects[l].score,tier:4,id:objects[l].id,size:1.3,source:"YellowT.png",
				poison:objects[l].poison})
				objects.splice(l,1)
			}
			else if(objects[l].tier==6){
				Oid++
				objects.push({picture:pink,x:objects[l].x,y:objects[l].y,level:"pink",speed:1.8,direction:objects[l].direction,score:objects[l].score,tier:5,id:Oid,size:1.4,source:"PinkT.png",
				poison:objects[l].poison})
				Oid++
				objects.push({picture:pink,x:objects[l].x,y:objects[l].y,level:"pink",speed:1.8,direction:objects[l].direction,score:objects[l].score,tier:5,id:Oid+1,size:1.4,source:"PinkT.png",
				poison:objects[l].poison})
				objects.splice(l,1)
			}
		}
		function zapkill(posx,posy,objscore,number,shrapnel2,currentleap){
			zappop(number)
			news=[]
			for(j=objects.length-1;j>=0;j--){
				xdis=posx-objects[j].x
				ydis=posy-objects[j].y
				distance=Math.sqrt(Math.pow(xdis,2)+Math.pow(ydis,2))
				if(distance<=currentleap&&objscore>objects[j].score&&objects[j].x>0&&objects[j].y>0){
					if(news.length==0){
						news.push({x:objects[j].x,y:objects[j].y,score:objects[j].score,num:j,id:objects[j].id})
					}
					else if(news.length!=0&&objects[j].score>news[0].score){
						news=[]
						news.push({x:objects[j].x,y:objects[j].y,score:objects[j].score,num:j,id:objects[j].id})
					}
				}
			}
			if(!news.length==0){
				if(shrapnel2!=null){
					a=Math.floor((Math.random()*10)+1)
					if(a%3==0){
						projectiles.push({x:news[0].x+30,y:news[0].y+30,xt:0,yt:0,angle:-Math.PI/2,speed:projectileV,xc:news[0].x+30,yc:news[0].y+30,pierce:1,hit:[news[0].id],
						boom:false,popblacks:true,poison:false,popsandbags:false})
						projectiles.push({x:news[0].x+30,y:news[0].y+30,xt:0,yt:0,angle:Math.PI/4,speed:projectileV,xc:news[0].x+30,yc:news[0].y+30,pierce:1,hit:[news[0].id],
						boom:false,popblacks:true,poison:false,popsandbags:false})
						projectiles.push({x:news[0].x+30,y:news[0].y+30,xt:0,yt:0,angle:3*Math.PI/4,speed:projectileV,xc:news[0].x+30,yc:news[0].y+30,pierce:1,hit:[news[0].id],
						boom:false,popblacks:true,poison:false,popsandbags:false})
					}
				}
				multizap.push({oldx:posx,oldy:posy,newx:news[0].x,newy:news[0].y,timer:10})
				zapkill(news[0].x,news[0].y,news[0].score,news[0].num,towers[i].shrapnel,currentleap)
			}
		}
		function zappop(l){
			money+=1
			if(objects[l].tier==1){
				objects.splice(l,1)
			}
			else if(objects[l].tier==2){
				objects.push({picture:red,x:objects[l].x,y:objects[l].y,level:"red",speed:0.6,direction:objects[l].direction,score:objects[l].score,tier:1,id:objects[l].id,size:1,source:"RedT.png",
				poison:objects[l].poison})
				objects.splice(l,1)
			}
			else if(objects[l].tier==3){
				objects.push({picture:blue,x:objects[l].x,y:objects[l].y,level:"blue",speed:1,direction:objects[l].direction,score:objects[l].score,tier:2,id:objects[l].id,size:1.1,source:"BlueT.png",
				poison:objects[l].poison})
				objects.splice(l,1)
			}
			else if(objects[l].tier==4){
				objects.push({picture:green,x:objects[l].x,y:objects[l].y,level:"green",speed:1.4,direction:objects[l].direction,score:objects[l].score,tier:3,id:objects[l].id,size:1.2,source:"GreenT.png",
				poison:objects[l].poison})
				objects.splice(l,1)
			}
			else if(objects[l].tier==5){
				objects.push({picture:yellow,x:objects[l].x,y:objects[l].y,level:"yellow",speed:1.4,direction:objects[l].direction,score:objects[l].score,tier:4,id:objects[l].id,size:1.3,source:"YellowT.png",
				poison:objects[l].poison})
				objects.splice(l,1)
			}
			else if(objects[l].tier==6){
				Oid++
				objects.push({picture:pink,x:objects[l].x,y:objects[l].y,level:"pink",speed:1.8,direction:objects[l].direction,score:objects[l].score,tier:5,id:Oid,size:1.4,source:"PinkT.png",
				poison:objects[l].poison})
				Oid++
				objects.push({picture:pink,x:objects[l].x,y:objects[l].y,level:"pink",speed:1.8,direction:objects[l].direction,score:objects[l].score,tier:5,id:Oid+1,size:1.4,source:"PinkT.png",
				poison:objects[l].poison})
				objects.splice(l,1)
			}
			else if(objects[l].tier==7){
				Oid++
				objects.push({picture:pink,x:objects[l].x,y:objects[l].y,level:"pink",speed:1.8,direction:objects[l].direction,score:objects[l].score,tier:5,id:Oid,size:1.4,source:"PinkT.png",
				poison:objects[l].poison})
				Oid++
				objects.push({picture:pink,x:objects[l].x,y:objects[l].y,level:"pink",speed:1.8,direction:objects[l].direction,score:objects[l].score,tier:5,id:Oid+1,size:1.4,source:"PinkT.png",
				poison:objects[l].poison})
				objects.splice(l,1)
			}
			else if(objects[l].tier==8){
				Oid++
				objects.push({picture:purple,x:objects[l].x,y:objects[l].y,level:"purple",speed:1.4,direction:objects[l].direction,score:objects[l].score,tier:7,id:Oid,size:0.8,source:"purpleT.png",poison:false,})
				Oid++
				objects.push({picture:black,x:objects[l].x,y:objects[l].y,level:"black",speed:1.4,direction:objects[l].direction,score:objects[l].score,tier:6,id:Oid+1,size:0.8,source:"BlackT.png",poison:false,})
				objects.splice(l,1)
			}
			else if(objects[l].tier==9){
				if(objects[l].health==0){
					objects.push({picture:purack,x:objects[l].x,y:objects[l].y,level:"purack",speed:1.8,direction:objects[l].direction,score:objects[l].score,tier:8,id:objects[l].id,size:1.25,source:"purack.png",poison:false})
					objects.splice(l,1)
				}
				else{
					objects[l].health-=1
					money-=1
				}
			}
			else if(objects[l].tier==10){
				if(objects[l].health==0){
					Oid++
					objects.push({picture:baije,x:objects[l].x,y:objects[l].y,level:"baije",speed:1.2,direction:objects[l].direction,score:objects[l].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:8})
					Oid++
					objects.push({picture:baije,x:objects[l].x,y:objects[l].y,level:"baije",speed:1.2,direction:objects[l].direction,score:objects[l].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:8})
					Oid++
					objects.push({picture:baije,x:objects[l].x,y:objects[l].y,level:"baije",speed:1.2,direction:objects[l].direction,score:objects[l].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:8})
					Oid++
					objects.push({picture:baije,x:objects[l].x,y:objects[l].y,level:"baije",speed:1.2,direction:objects[l].direction,score:objects[l].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:8})
					Oid++
					objects.push({picture:baije,x:objects[l].x,y:objects[l].y,level:"baije",speed:1.2,direction:objects[l].direction,score:objects[l].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:8})
					Oid++
					objects.push({picture:baije,x:objects[l].x,y:objects[l].y,level:"baije",speed:1.2,direction:objects[l].direction,score:objects[l].score,tier:9,id:Oid,size:2.1,source:"baije.png",health:8})
					objects.splice(l,1)
				}
				else{
					objects[l].health-=1
					money-=1
				}
			}
			else if(objects[l].tier==11){
				if(objects[l].health==0){
					Oid++
					objects.push({picture:cyan,x:objects[l].x,y:objects[l].y,level:"cyan",speed:0.9,direction:objects[l].direction,score:objects[l].score,tier:10,id:Oid,size:2.4,source:"cyan.png",health:35})
					Oid++
					objects.push({picture:cyan,x:objects[l].x,y:objects[l].y,level:"cyan",speed:0.9,direction:objects[l].direction,score:objects[l].score,tier:10,id:Oid,size:2.4,source:"cyan.png",health:35})
					Oid++
					objects.push({picture:cyan,x:objects[l].x,y:objects[l].y,level:"cyan",speed:0.9,direction:objects[l].direction,score:objects[l].score,tier:10,id:Oid,size:2.4,source:"cyan.png",health:35})
					Oid++
					objects.push({picture:cyan,x:objects[l].x,y:objects[l].y,level:"cyan",speed:0.9,direction:objects[l].direction,score:objects[l].score,tier:10,id:Oid,size:2.4,source:"cyan.png",health:35})
					objects.splice(l,1)
				}
				else{
					objects[l].health-=1
					money-=1
				}
			}
			else if(objects[l].tier==12){
				if(objects[l].health==0){
					Oid++
					objects.push({picture:orange,x:objects[l].x,y:objects[l].y,level:"orange",speed:0.6,direction:objects[l].direction,score:objects[l].score,tier:11,id:Oid,size:2.7,source:"cyan.png",health:115})
					Oid++
					objects.push({picture:orange,x:objects[l].x,y:objects[l].y,level:"orange",speed:0.6,direction:objects[l].direction,score:objects[l].score,tier:11,id:Oid,size:2.7,source:"cyan.png",health:115})
					Oid++
					objects.push({picture:orange,x:objects[l].x,y:objects[l].y,level:"orange",speed:0.6,direction:objects[l].direction,score:objects[l].score,tier:11,id:Oid,size:2.7,source:"cyan.png",health:115})
					Oid++
					objects.push({picture:orange,x:objects[l].x,y:objects[l].y,level:"orange",speed:0.6,direction:objects[l].direction,score:objects[l].score,tier:11,id:Oid,size:2.7,source:"cyan.png",health:115})
					objects.splice(l,1)
				}
				else{
					objects[l].health-=1
					money-=1
				}
			}
		}
		function startMove(){
			try{
				ctx.drawImage(sidebar,800,0,200,800);
				ctx.drawImage(path,0,0,800,800);
				if(objects.length==0){
					ctx.drawImage(start,800,800,200,100)
				}
				else{
					if(globalspeed==3){
						//slow down
						ctx.drawImage(sup,800,800,200,100)
					}
					if(globalspeed==1.5){
						//speed up
						ctx.drawImage(sdown,800,800,200,100)
					}
				}
				ctx.drawImage(bottom,0,800,800,100)
				//draw arrows
				if(round==0){
					ctx.globalAlpha=0.6
					ctx.drawImage(Barrow,20,435,60,25)
					ctx.translate(125,490);
					ctx.rotate(0.5*Math.PI)
					ctx.drawImage(Barrow,-30,-12.5,60,25)
					ctx.rotate((0.5*Math.PI) * ( -1 ) );
					ctx.translate((125) * (-1), (490) * (-1));
					ctx.drawImage(Barrow,170,510,60,25)
					ctx.translate(277,340);
					ctx.rotate(-0.5*Math.PI)
					ctx.drawImage(Barrow,-30,-12.5,60,25)
					ctx.rotate((-0.5*Math.PI) * ( -1 ) );
					ctx.translate((277) * (-1), (340) * (-1));
					ctx.translate(277,460);
					ctx.rotate(-0.5*Math.PI)
					ctx.drawImage(Barrow,-30,-12.5,60,25)
					ctx.rotate((-0.5*Math.PI) * ( -1 ) );
					ctx.translate((277) * (-1), (460) * (-1));
					ctx.translate(185,270);
					ctx.rotate(Math.PI)
					ctx.drawImage(Barrow,-30,-12.5,60,25)
					ctx.rotate((Math.PI) * ( -1 ) );
					ctx.translate((185) * (-1), (270) * (-1));
					ctx.translate(130,200);
					ctx.rotate(-0.5*Math.PI)
					ctx.drawImage(Barrow,-30,-12.5,60,25)
					ctx.rotate((0.5*Math.PI) * ( 1 ) );
					ctx.translate((130) * (-1), (200) * (-1));
					ctx.globalAlpha=1
				}
				updated=1
				globalspeedcheck=globalspeed
				for(i=0;i<objects.length;i++){
					//add score
					objects[i].score+=(objects[i].speed)*globalspeed
					//if right
					if(objects[i].direction=="right"){
						objects[i].x+=objects[i].speed*globalspeed
						drawobject(objects,i,0.5)
						if(objects[i].x>=100&&objects[i].x<=110&&objects[i].y==420){
							objects[i].x=100
							objects[i].direction="down"
						}
						//third turn
						if(objects[i].x>=260&&objects[i].x<=270&&objects[i].y==500){
							objects[i].x=260
							objects[i].direction="up"
						}
						//seventh turn
						if(objects[i].x>=660&&objects[i].x<=670&&objects[i].y==100){
							objects[i].x=660
							objects[i].direction="down"
						}
						//eleventh turn
						if(objects[i].x>=580&&objects[i].x<=590&&objects[i].y==420){
							objects[i].x=580
							objects[i].direction="down"
						}
					}
					//if down
					if(objects[i].direction=="down"){
						objects[i].y+=objects[i].speed*globalspeed
						drawobject(objects,i,1)
						//second turn
						if(objects[i].y>=500&&objects[i].y<=510&&objects[i].x==100){
							objects[i].y=500
							objects[i].direction="right"
						}
						//eight turn
						if(objects[i].y>=260&&objects[i].y<=270&&objects[i].x==660){
							objects[i].y=260
							objects[i].direction="left"
						}
						//tenth turn
						if(objects[i].y>=420&&objects[i].y<=430&&objects[i].x==420){
							objects[i].y=420
							objects[i].direction="right"
						}
						//twelfth turn
						if(objects[i].y>=660&&objects[i].y<=670&&objects[i].x==580){
							objects[i].y=660
							objects[i].direction="left"
						}
						//popping object
						if(objects[i].y>=800){
							if(objects[i].tier<=5){
								health-=objects[i].tier
							}
							if(objects[i].tier==6||objects[i].tier==7){
								health-=11
							}
							if(objects[i].tier==8){
								health-=23
							}
							if(objects[i].tier==9){
								health-=24
							}
							if(objects[i].tier==10){
								health-=150
							}
							if(objects[i].tier==11){
								health-=600
							}
							if(objects[i].tier==12){
								health-=2400
							}
							if(objects[i].tier==14){
								health-=9600
							}
							if(objects[i].tier==13){
								health-=10
							}
							objects.splice(i,1)
						}
					}
					//if up
					if(objects[i].direction=="up"){
						objects[i].y-=objects[i].speed*globalspeed
						drawobject(objects,i,0)
						//fourth turn
						if(objects[i].y<=260&&objects[i].y>=250&&objects[i].x==260){
							objects[i].y=260
							objects[i].direction="left"
						}
						//sixth turn
						if(objects[i].y<=100&&objects[i].y>=90&&objects[i].x==100){
							objects[i].y=100
							objects[i].direction="right"
						}
					}
					//if left
					if(objects[i].direction=="left"){
						objects[i].x-=objects[i].speed*globalspeed
						drawobject(objects,i,-0.5)
						//fifth turn
						if(objects[i].x<=100&&objects[i].x>=90&&objects[i].y==260){
							objects[i].x=100
							objects[i].direction="up"
						}
						//ninth turn
						if(objects[i].x<=420&&objects[i].x>=410&&objects[i].y==260){
							objects[i].x=420
							objects[i].direction="down"
						}
						//thirteenth turn
						if(objects[i].x<=260&&objects[i].x>=250&&objects[i].y==660){
							objects[i].x=260
							objects[i].direction="down"
						}
					}
				}
			}
			catch(err){
			}
			//render explosions
			for(i=0;i<explosions.length;i++){
				explosions[i].time-=1
				if(explosions[i].time!=0){
					ctx.globalAlpha=0.4
					ctx.drawImage(kaboom,explosions[i].x-(explosions[i].width/2),explosions[i].y-(explosions[i].width/2),explosions[i].width,explosions[i].width)
					ctx.globalAlpha=1
					explosions[i].width-=(explosions[i].height/explosions[i].div)
				}
				else{
					explosions.splice(i,1)
				}
			}
			//render bank text
			for(i=0;i<banktext.length;i++){
				if(banktext[i].time>0){
					banktext[i].time-=1
					ctx.font="48px serif"
					ctx.fillStyle="orange"
					ctx.fillText(banktext[i].roundmoney,banktext[i].x,banktext[i].y)
				}
				if(banktext[i].time<=0){
					banktext.splice(i,1)
				}
			}
			//render projectiles
			if(projectiles.length>0&&objects.length!=0){
				for(k=0;k<projectiles.length;k++){
					for(l=0;l<objects.length;l++){
						if(projectiles[k]!==undefined&&projectiles[k].x>objects[l].x&&projectiles[k].y>objects[l].y&&projectiles[k].x<objects[l].x+40*objects[l].size&&projectiles[k].y<objects[l].y+40*objects[l].size&&
						objects[l].tier!==undefined){
							for(i=0;i<projectiles[k].hit.length;i++){
								if(projectiles[k].hit[i]==objects[l].id){
									stop=true
								}
							}
							if(!stop){
								shoot(projectiles,objects,k,l)
							}
							stop=false
						}
					}
					if(projectiles[k]!==undefined){
						theta=projectiles[k].angle
						speed=projectiles[k].speed*globalspeed
						xd=projectiles[k].xc-projectiles[k].xt
						yd=projectiles[k].yc-projectiles[k].yt
						if(xd<0){
							projectiles[k].x+=speed*Math.cos(theta)
							projectiles[k].y+=speed*Math.sin(theta)
						}
						if(xd>=0){
							projectiles[k].x-=speed*Math.cos(theta)
							projectiles[k].y-=speed*Math.sin(theta)
						}
						if(projectiles[k].tier==3){
							ctx.translate(projectiles[k].x,projectiles[k].y);
							ctx.rotate(theta+0.5*Math.PI)
							ctx.drawImage(bomb,-4,-20,8,40)
							ctx.rotate((theta+0.5*Math.PI) * ( -1 ) );
							ctx.translate((projectiles[k].x) * (-1), (projectiles[k].y) * (-1));
						}
						if(projectiles[k].poison){
							ctx.translate(projectiles[k].x,projectiles[k].y);
							ctx.rotate(theta+1.5*Math.PI)
							ctx.drawImage(dart,-4,-10,8,20)
							ctx.rotate((theta+1.5*Math.PI) * ( -1 ) );
							ctx.translate((projectiles[k].x) * (-1), (projectiles[k].y) * (-1));
						}
						if(projectiles[k].tier==1){
							ctx.drawImage(bullet,projectiles[k].x-3,projectiles[k].y-3,6,6)
						}
						if(projectiles[k].tier==2){
							ctx.drawImage(electroball,projectiles[k].x-6,projectiles[k].y-6,12,12)
						}
						if(projectiles[k].x>800||projectiles[k].x<0||projectiles[k].y>800||projectiles[k].y<0){
							projectiles.splice(k,1)
						}
					}
				}
			}
			//render zaps
			for(j=multizap.length-1;j>=0;j--){
				if(multizap[j].timer>0){
					xdif=multizap[j].newx-multizap[j].oldx;
					ydif=multizap[j].newy-multizap[j].oldy;
					if(xdif>0&&ydif>=0){
						theta=Math.atan(ydif/xdif)+(0.5*Math.PI);
					}
					if(xdif>=0&&ydif<0){
						theta=Math.atan(ydif/xdif)-(1.5*Math.PI);
					}
					if(xdif<0&&ydif<0){
						theta=Math.atan(ydif/xdif)-(0.5*Math.PI);
					}
					if(xdif<0&&ydif>0){
						theta=Math.atan(ydif/xdif)+(1.5*Math.PI);
					}
					distance = Math.sqrt(Math.pow(xdif, 2) + Math.pow(ydif, 2));
					xaddition = (distance/4)*Math.cos(theta);
					yaddition = (distance/4)*Math.sin(theta);
					ctx.save();
					ctx.translate(multizap[j].newx+20-xaddition, multizap[j].newy+20-yaddition);
					ctx.rotate(theta);
					ctx.translate((multizap[j].newx+20-xaddition) * (-1), (multizap[j].newy+20-yaddition) * (-1));
					ctx.drawImage(zap, multizap[j].newx+20-xaddition, multizap[j].newy+20-yaddition, distance/2, distance);
					ctx.restore();
					multizap[j].timer-=1*globalspeed
				}
				else{
					multizap.splice(j,1)
				}
			}
			//render towers
			targets=[]
			for(l=0;l<objects.length;l++){
				if(objects[l].poison&&objects[l].poison[1]>0&&objects[l].poison[0]<=0){
					objects[l].poison[1]-=1
					objects[l].poison[0]=objects[l].poison[2]
					poisonkill(objects,l)
				}
			}
			for (i = 0; i < towers.length; i++) {
				if(towers[i].armslength!=null){
					for(j=0;j<towers[i].armslength;j++){
					    if (j == 0) {
					        if (towers[i].arm1 !== undefined && towers[i].arm1.xt !== undefined) {
					            oldxt = towers[i].arm1.xt
					            oldyt = towers[i].arm1.yt
					            xdif = (towers[i].x) - towers[i].arm1.xt
					            ydif = (towers[i].y) - towers[i].arm1.yt
					            if (xdif > 0 && ydif >= 0) {
					                theta = Math.atan(ydif / xdif) + (0.5 * Math.PI);
					            }
					            if (xdif >= 0 && ydif < 0) {
					                theta = Math.atan(ydif / xdif) - (1.5 * Math.PI);
					            }
					            if (xdif < 0 && ydif < 0) {
					                theta = Math.atan(ydif / xdif) - (0.5 * Math.PI);
					            }
					            if (xdif < 0 && ydif > 0) {
					                theta = Math.atan(ydif / xdif) + (1.5 * Math.PI);
					            }
					            distance = Math.sqrt(Math.pow(xdif, 2) + Math.pow(ydif, 2))
								xaddition = ((distance/4)*Math.cos(theta))
								yaddition = ((distance/4)*Math.sin(theta))
					            ctx.save();
					            ctx.translate(towers[i].x+30-xaddition, towers[i].y+30-yaddition);
					            ctx.rotate(theta);
					            ctx.translate((towers[i].x+30-xaddition) * (-1), (towers[i].y+30-yaddition) * (-1));
					            ctx.drawImage(wigglywoo, towers[i].x+30-xaddition, towers[i].y+30-yaddition, distance/2, distance);
					            ctx.restore();
					        }
					    }
						if (j == 1) {
					        if (towers[i].arm2 !== undefined && towers[i].arm2.xt !== undefined) {
					            oldxt = towers[i].arm2.xt
					            oldyt = towers[i].arm2.yt
					            xdif = (towers[i].x) - towers[i].arm2.xt
					            ydif = (towers[i].y) - towers[i].arm2.yt
					            if (xdif > 0 && ydif >= 0) {
					                theta = Math.atan(ydif / xdif) + (0.5 * Math.PI);
					            }
					            if (xdif >= 0 && ydif < 0) {
					                theta = Math.atan(ydif / xdif) - (1.5 * Math.PI);
					            }
					            if (xdif < 0 && ydif < 0) {
					                theta = Math.atan(ydif / xdif) - (0.5 * Math.PI);
					            }
					            if (xdif < 0 && ydif > 0) {
					                theta = Math.atan(ydif / xdif) + (1.5 * Math.PI);
					            }
					            distance = Math.sqrt(Math.pow(xdif, 2) + Math.pow(ydif, 2))
								xaddition = ((distance/4)*Math.cos(theta))
								yaddition = ((distance/4)*Math.sin(theta))
					            ctx.save();
					            ctx.translate(towers[i].x+30-xaddition, towers[i].y+30-yaddition);
					            ctx.rotate(theta);
					            ctx.translate((towers[i].x+30-xaddition) * (-1), (towers[i].y+30-yaddition) * (-1));
					            ctx.drawImage(wigglywoo, towers[i].x+30-xaddition, towers[i].y+30-yaddition, distance/2, distance);
					            ctx.restore();
					        }
					    }
						if (j == 2) {
					        if (towers[i].arm3 !== undefined && towers[i].arm3.xt !== undefined) {
					            oldxt = towers[i].arm3.xt
					            oldyt = towers[i].arm3.yt
					            xdif = (towers[i].x) - towers[i].arm3.xt
					            ydif = (towers[i].y) - towers[i].arm1.yt
					            if (xdif > 0 && ydif >= 0) {
					                theta = Math.atan(ydif / xdif) + (0.5 * Math.PI);
					            }
					            if (xdif >= 0 && ydif < 0) {
					                theta = Math.atan(ydif / xdif) - (1.5 * Math.PI);
					            }
					            if (xdif < 0 && ydif < 0) {
					                theta = Math.atan(ydif / xdif) - (0.5 * Math.PI);
					            }
					            if (xdif < 0 && ydif > 0) {
					                theta = Math.atan(ydif / xdif) + (1.5 * Math.PI);
					            }
					            distance = Math.sqrt(Math.pow(xdif, 2) + Math.pow(ydif, 2))
								xaddition = ((distance/4)*Math.cos(theta))
								yaddition = ((distance/4)*Math.sin(theta))
					            ctx.save();
					            ctx.translate(towers[i].x+30-xaddition, towers[i].y+30-yaddition);
					            ctx.rotate(theta);
					            ctx.translate((towers[i].x+30-xaddition) * (-1), (towers[i].y+30-yaddition) * (-1));
					            ctx.drawImage(wigglywoo, towers[i].x+30-xaddition, towers[i].y+30-yaddition, distance/2, distance);
					            ctx.restore();
					        }
					    }
					}
				}
				towers[i].cooldown-=1*globalspeed
				if(towers[i].flash>0){
					towers[i].flash-=1
					if(towers[i].TC==Pturret){
						towers[i].TC=PturretF
					}
					if(towers[i].TC==Bturret){
						towers[i].TC=BturretF
					}
					if(towers[i].TC==Rturret){
						towers[i].TC=RturretF
					}
					if(towers[i].TC==Gturret){
						towers[i].TC=GturretF
					}
					if(towers[i].TC==Tturret){
						towers[i].TC=TturretF
					}
				}
				if(towers[i].flash==0){
					if(towers[i].TC==PturretF){
						towers[i].TC=Pturret
					}
					if(towers[i].TC==BturretF){
						towers[i].TC=Bturret
					}
					if(towers[i].TC==RturretF){
						towers[i].TC=Rturret
					}
					if(towers[i].TC==GturretF){
						towers[i].TC=Gturret
					}
					if(towers[i].TC==TturretF){
						towers[i].TC=Tturret
					}
				}
				ctx.translate(towers[i].x+ts/2,towers[i].y+ts/2);
				ctx.rotate(towers[i].angle)
				ctx.drawImage(towers[i].TC,-ts/2,-ts/2,ts,ts)
				ctx.rotate(towers[i].angle * ( -1 ) );
				ctx.translate((towers[i].x+ts/2) * (-1), (towers[i].y+ts/2) * (-1));
				//towers target
				if(objects.length>0){
					if(towers[i].tier!=2&&towers[i].tier!=5&&towers[i].tier!=6){
						for(j=0;j<objects.length;j++){
							XD=(objects[j].x)-(towers[i].x)
							YD=(objects[j].y)-(towers[i].y)
							distance=Math.sqrt(Math.pow(XD,2)+Math.pow(YD,2))
							if(distance<towers[i].range&&!towers[i].poison){
								if(targets.length==0){
									targets.push({x:objects[j].x,y:objects[j].y,score:objects[j].score})
								}
								else if(objects[j].score>targets[0].score){
									targets=[]
									targets.push({x:objects[j].x,y:objects[j].y,score:objects[j].score})
								}
							}
							if(distance<towers[i].range&&towers[i].poison){
								if(targets.length==0&&!objects[j].poison){
									targets.push({x:objects[j].x,y:objects[j].y,score:objects[j].score})
								}
								if(targets.length!=0&&objects[j].score>targets[0].score&&!objects[j].poison){
									targets=[]
									targets.push({x:objects[j].x,y:objects[j].y,score:objects[j].score})
								}
							}
						}
						if(!targets.length==0){
							xdif=(towers[i].x)-targets[0].x
							ydif=(towers[i].y)-targets[0].y
							theta=Math.atan(ydif/xdif)
							if(xdif>0&&ydif>=0){
								towers[i].angle=Math.atan(ydif/xdif)-(0.5*Math.PI);
							}
							if(xdif>=0&&ydif<0){
								towers[i].angle=Math.atan(ydif/xdif)+(1.5*Math.PI);
							}
							if(xdif<0&&ydif<0){
								towers[i].angle=Math.atan(ydif/xdif)+(0.5*Math.PI);
							}
							if(xdif<0&&ydif>0){
								towers[i].angle=Math.atan(ydif/xdif)-(1.5*Math.PI);
							}
							if(towers[i].cooldown<=0){
								towers[i].cooldown=towers[i].originalcooldown
								ppoison=towers[i].poison
								if(towers[i].poison){
									ppoison=[]
									for(q=0;q<towers[i].poison.length;q++){
										ppoison.push(towers[i].poison[q])
									}
								}
								if(objects.length>0){
									if(towers[i].streams==false){
										projectiles.push({x:towers[i].x+30,y:towers[i].y+30,xt:targets[0].x,yt:targets[0].y,angle:theta,speed:towers[i].velocity,xc:towers[i].x,yc:towers[i].y,pierce:towers[i].pierce,hit:[],
										boom:towers[i].boom,popblacks:towers[i].popblacks,poison:towers[i].poison,popsandbags:towers[i].sandbags,tier:towers[i].tier})
									}
									towers[i].flash=7
									if(towers[i].darts>=2){
										theta+=Math.PI/8
										projectiles.push({x:towers[i].x+30,y:towers[i].y+30,xt:targets[0].x,yt:targets[0].y,angle:theta,speed:towers[i].velocity,xc:towers[i].x,yc:towers[i].y,pierce:towers[i].pierce,hit:[],
										boom:towers[i].boom,popblacks:towers[i].popblacks,poison:towers[i].poison,popsandbags:towers[i].sandbags,tier:towers[i].tier})
										if(towers[i].darts>=3){
											theta-=Math.PI/4
											projectiles.push({x:towers[i].x+30,y:towers[i].y+30,xt:targets[0].x,yt:targets[0].y,angle:theta,speed:towers[i].velocity,xc:towers[i].x,yc:towers[i].y,pierce:towers[i].pierce,hit:[],
											boom:towers[i].boom,popblacks:towers[i].popblacks,poison:towers[i].poison,popsandbags:towers[i].sandbags,tier:towers[i].tier})
										}
									}
									if(towers[i].streams>1){
										if(towers[i].streams==2){
											projectiles.push({x:towers[i].x+30-(12*Math.cos(towers[i].angle)),y:towers[i].y+30-(12*Math.sin(towers[i].angle)),xt:targets[0].x,yt:targets[0].y,angle:theta,speed:towers[i].velocity,xc:towers[i].x,yc:towers[i].y,pierce:towers[i].pierce,hit:[],
											boom:towers[i].boom,popblacks:towers[i].popblacks,poison:towers[i].poison,popsandbags:towers[i].sandbags,tier:towers[i].tier})
											projectiles.push({x:towers[i].x+30+(12*Math.cos(towers[i].angle)),y:towers[i].y+30+(12*Math.sin(towers[i].angle)),xt:targets[0].x,yt:targets[0].y,angle:theta,speed:towers[i].velocity,xc:towers[i].x,yc:towers[i].y,pierce:towers[i].pierce,hit:[],
											boom:towers[i].boom,popblacks:towers[i].popblacks,poison:towers[i].poison,popsandbags:towers[i].sandbags,tier:towers[i].tier})
										}
										if(towers[i].streams==4){
											projectiles.push({x:towers[i].x+30-(6*Math.cos(towers[i].angle)),y:towers[i].y+30-(6*Math.sin(towers[i].angle)),xt:targets[0].x,yt:targets[0].y,angle:theta,speed:towers[i].velocity,xc:towers[i].x,yc:towers[i].y,pierce:towers[i].pierce,hit:[],
											boom:towers[i].boom,popblacks:towers[i].popblacks,poison:towers[i].poison,popsandbags:towers[i].sandbags,tier:towers[i].tier})
											projectiles.push({x:towers[i].x+30-(18*Math.cos(towers[i].angle)),y:towers[i].y+30-(18*Math.sin(towers[i].angle)),xt:targets[0].x,yt:targets[0].y,angle:theta,speed:towers[i].velocity,xc:towers[i].x,yc:towers[i].y,pierce:towers[i].pierce,hit:[],
											boom:towers[i].boom,popblacks:towers[i].popblacks,poison:towers[i].poison,popsandbags:towers[i].sandbags,tier:towers[i].tier})
											projectiles.push({x:towers[i].x+30+(6*Math.cos(towers[i].angle)),y:towers[i].y+30+(6*Math.sin(towers[i].angle)),xt:targets[0].x,yt:targets[0].y,angle:theta,speed:towers[i].velocity,xc:towers[i].x,yc:towers[i].y,pierce:towers[i].pierce,hit:[],
											boom:towers[i].boom,popblacks:towers[i].popblacks,poison:towers[i].poison,popsandbags:towers[i].sandbags,tier:towers[i].tier})
											projectiles.push({x:towers[i].x+30-(18*Math.cos(towers[i].angle)),y:towers[i].y+30-(18*Math.sin(towers[i].angle)),xt:targets[0].x,yt:targets[0].y,angle:theta,speed:towers[i].velocity,xc:towers[i].x,yc:towers[i].y,pierce:towers[i].pierce,hit:[],
											boom:towers[i].boom,popblacks:towers[i].popblacks,poison:towers[i].poison,popsandbags:towers[i].sandbags,tier:towers[i].tier})
										}
									}
								}
							}
						}
					}
				}
				if(towers[i].tier==5){
					for(j=0;j<objects.length;j++){
						XD=(objects[j].x)-(towers[i].x)
						YD=(objects[j].y)-(towers[i].y)
						distance=Math.sqrt(Math.pow(XD,2)+Math.pow(YD,2))
						if(distance<towers[i].range&&!towers[i].poison){
							if(targets.length==0){
								targets.push({x:objects[j].x,y:objects[j].y,score:objects[j].score,num:j,id:objects[j].id})
							}
							else if(objects[j].score>targets[0].score){
								targets=[]
								targets.push({x:objects[j].x,y:objects[j].y,score:objects[j].score,num:j,id:objects[j].id})
							}
						}
					}
					if(!targets.length==0){
						xdif=(towers[i].x)-targets[0].x
						ydif=(towers[i].y)-targets[0].y
						theta=Math.atan(ydif/xdif)
						if(xdif>0&&ydif>=0){
							towers[i].angle=Math.atan(ydif/xdif)-(0.5*Math.PI);
						}
						if(xdif>=0&&ydif<0){
							towers[i].angle=Math.atan(ydif/xdif)+(1.5*Math.PI);
						}
						if(xdif<0&&ydif<0){
							towers[i].angle=Math.atan(ydif/xdif)+(0.5*Math.PI);
						}
						if(xdif<0&&ydif>0){
							towers[i].angle=Math.atan(ydif/xdif)-(1.5*Math.PI);
						}
						if(towers[i].cooldown<=0){
							towers[i].cooldown=towers[i].originalcooldown
							towers[i].flash=20
							multizap.push({oldx:towers[i].x,oldy:towers[i].y,newx:targets[0].x,newy:targets[0].y,timer:10})
							zapkill(targets[0].x,targets[0].y,targets[0].score,targets[0].num,towers[i].shrapnel,towers[i].leap)
							if(towers[i].shrapnel!=null){
								a=Math.floor((Math.random()*10)+1)
								if(a%3==0){
									projectiles.push({x:targets[0].x+20,y:targets[0].y+20,xt:0,yt:0,angle:Math.PI/4,speed:projectileV,xc:targets[0].x+20,yc:targets[0].y+20,pierce:1,hit:[targets[0].id],
									boom:false,popblacks:true,poison:false,popsandbags:false})
									projectiles.push({x:targets[0].x+20,y:targets[0].y+20,xt:0,yt:0,angle:-Math.PI/2,speed:projectileV,xc:targets[0].x+20,yc:targets[0].y+20,pierce:1,hit:[targets[0].id],
									boom:false,popblacks:true,poison:false,popsandbags:false})
									projectiles.push({x:targets[0].x+20,y:targets[0].y+20,xt:0,yt:0,angle:3*Math.PI/4,speed:projectileV,xc:targets[0].x+20,yc:targets[0].y+20,pierce:1,hit:[targets[0].id],
									boom:false,popblacks:true,poison:false,popsandbags:false})
								}
							}
						}
					}
					if(towers[i].armslength!=null){
						for(k=0;k<towers[i].armslength;k++){
							targets=[]
							if(k==0){
								if(towers[i].arm1!==undefined){
									towers[i].arm1.cooldown-=1
								}
								for(j=0;j<objects.length;j++){
									XD=(objects[j].x)-(towers[i].x)
									YD=(objects[j].y)-(towers[i].y)
									distance=Math.sqrt(Math.pow(XD,2)+Math.pow(YD,2))
									if(distance<towers[i].range&&!towers[i].poison&&(towers[i].arm2===undefined||towers[i].arm2.id!=objects[j].id)&&(towers[i].arm3===undefined||towers[i].arm3.id!=objects[j].id)){
										if(targets.length==0){
											targets.push({x:objects[j].x,y:objects[j].y,score:objects[j].score,num:j,id:objects[j].id})
										}
										else if(objects[j].score>targets[0].score){
											targets=[]
											targets.push({x:objects[j].x,y:objects[j].y,score:objects[j].score,num:j,id:objects[j].id})
										}
									}
								}
								if(targets.length>0){
									if(towers[i].arm1==null){
										towers[i].arm1={xs:towers[i].x,ys:towers[i].y,xt:targets[0].x,yt:targets[0].y,cooldown:100,id:targets[0].id}
									}
									else{
										towers[i].arm1={xs:towers[i].x,ys:towers[i].y,xt:targets[0].x,yt:targets[0].y,cooldown:towers[i].arm1.cooldown,id:targets[0].id}
									}
									if(towers[i].arm1.cooldown<=0){
										zappop(targets[0].num)
										towers[i].arm1.cooldown=100
									}
								}
							}
							if(k==1){
								if(towers[i].arm2!==undefined){
									towers[i].arm2.cooldown-=1
								}
								for(j=0;j<objects.length;j++){
									XD=(objects[j].x)-(towers[i].x)
									YD=(objects[j].y)-(towers[i].y)
									distance=Math.sqrt(Math.pow(XD,2)+Math.pow(YD,2))
									if(distance<towers[i].range&&!towers[i].poison&&(towers[i].arm1===undefined||towers[i].arm1.id!=objects[j].id)&&(towers[i].arm3===undefined||towers[i].arm3.id!=objects[j].id)){
										if(targets.length==0){
											targets.push({x:objects[j].x,y:objects[j].y,score:objects[j].score,num:j,id:objects[j].id})
										}
										else if(objects[j].score>targets[0].score){
											targets=[]
											targets.push({x:objects[j].x,y:objects[j].y,score:objects[j].score,num:j,id:objects[j].id})
										}
									}
								}
								if(targets.length>0){
									if(towers[i].arm2==null){
										towers[i].arm2={xs:towers[i].x,ys:towers[i].y,xt:targets[0].x,yt:targets[0].y,cooldown:100,id:targets[0].id}
									}
									else{
										towers[i].arm2={xs:towers[i].x,ys:towers[i].y,xt:targets[0].x,yt:targets[0].y,cooldown:towers[i].arm2.cooldown,id:targets[0].id}
									}
									if(towers[i].arm2.cooldown<=0){
										zappop(targets[0].num)
										towers[i].arm2.cooldown=100
									}
								}
							}
							if(k==2){
								if(towers[i].arm3!==undefined){
									towers[i].arm3.cooldown-=1
								}
								for(j=0;j<objects.length;j++){
									XD=(objects[j].x)-(towers[i].x)
									YD=(objects[j].y)-(towers[i].y)
									distance=Math.sqrt(Math.pow(XD,2)+Math.pow(YD,2))
									if(distance<towers[i].range&&!towers[i].poison&&(towers[i].arm1===undefined||towers[i].arm1.id!=objects[j].id)&&(towers[i].arm2===undefined||towers[i].arm2.id!=objects[j].id)){
										if(targets.length==0){
											targets.push({x:objects[j].x,y:objects[j].y,score:objects[j].score,num:j,id:objects[j].id})
										}
										else if(objects[j].score>targets[0].score){
											targets=[]
											targets.push({x:objects[j].x,y:objects[j].y,score:objects[j].score,num:j,id:objects[j].id})
										}
									}
								}
								if(targets.length>0){
									if(towers[i].arm3==null){
										towers[i].arm3={xs:towers[i].x,ys:towers[i].y,xt:targets[0].x,yt:targets[0].y,cooldown:100,id:targets[0].id}
									}
									else{
										towers[i].arm3={xs:towers[i].x,ys:towers[i].y,xt:targets[0].x,yt:targets[0].y,cooldown:towers[i].arm3.cooldown,id:targets[0].id}
									}
									if(towers[i].arm3.cooldown<=0){
										zappop(targets[0].num)
										towers[i].arm3.cooldown=100
									}
								}
							}
						}
					}
				}
				if(towers[i].tier==2){
					xdif=(towers[i].x)-mouseX+30
					ydif=(towers[i].y)-mouseY+30
					theta=Math.atan(ydif/xdif)
					if(xdif>0&&ydif>=0){
						towers[i].angle=Math.atan(ydif/xdif)-(0.5*Math.PI);
					}
					if(xdif>=0&&ydif<0){
						towers[i].angle=Math.atan(ydif/xdif)+(1.5*Math.PI);
					}
					if(xdif<0&&ydif<0){
						towers[i].angle=Math.atan(ydif/xdif)+(0.5*Math.PI);
					}
					if(xdif<0&&ydif>0){
						towers[i].angle=Math.atan(ydif/xdif)-(1.5*Math.PI);
					}
					if(towers[i].cooldown<=0){
						towers[i].cooldown=towers[i].originalcooldown
						if(objects.length>0){
							projectiles.push({x:towers[i].x+30,y:towers[i].y+30,xt:mouseX,yt:mouseY,angle:theta,speed:towers[i].velocity,xc:towers[i].x+30,yc:towers[i].y+30,pierce:towers[i].pierce,hit:[],
							boom:towers[i].boom,popblacks:towers[i].popblacks,poison:towers[i].poison,tier:towers[i].tier,popsandbags:towers[i].sandbags})
							towers[i].flash=7
						}
					}
				}
				targets=[]
			}
			//text
			ctx.font="48px serif"
			ctx.fillStyle="black"
			ctx.fillText(health,880,105)
			if(Math.log(money)!=-Infinity&&48/Math.log10(money)*2.5<=48){
				ctx.font=String(48/Math.log10(money)*2.5)+"px serif"
			}
			else{ctx.font="48px serif"}
			ctx.fillStyle="black"
			ctx.fillText(money,880,55)
			//towers
			ctx.drawImage(Pturret,820,148,ts,ts)
			ctx.drawImage(base1,820,148,ts,ts)
			ctx.drawImage(Bturret,920,148,ts,ts)
			ctx.drawImage(base2,820,148,ts,ts)
			ctx.drawImage(Rturret,820,221,ts,ts)
			ctx.drawImage(Gturret,920,221,ts,ts)
			ctx.drawImage(base4,820,148,ts,ts)
			ctx.drawImage(Tturret,820,294,ts,ts)
			ctx.drawImage(base5,820,148,ts,ts)
			ctx.drawImage(bank,920,294,ts,ts)
			if(pickup==1){
				ctx.drawImage(TC,mouseX-30,mouseY-30,ts,ts)
			}
			ctx.drawImage(bottom,0,800,800,100)
			ctx.font="22px serif"
			ctx.fillStyle="black"
			ctx.fillText("Round "+String(round),700,890)
			//draw menu
			if(drawmenu){
				ctx.beginPath();
				ctx.globalAlpha=0.5
				ctx.arc(upgrades[0].x,upgrades[0].y,towers[upgrades[0].towerIndex].range,0,2*Math.PI);
				ctx.fillStyle="white"
				ctx.fill()
				ctx.stroke();
				ctx.globalAlpha=1
				if(upgrades[0].tier==1){
					if(upgrades[0].upgrade1==1){
						ctx.drawImage(exPierce1,0,800,400,100)
					}
					if(upgrades[0].upgrade1==2){
						ctx.drawImage(exPierce2,0,800,400,100)
					}
					if(upgrades[0].upgrade1==3){
						ctx.drawImage(twoshots,0,800,400,100)
					}
					if(upgrades[0].upgrade1==4){
						ctx.drawImage(fourshots,0,800,400,100)
					}
					if(upgrades[0].upgrade2==1){
						ctx.drawImage(exRange1,400,800,400,100)
					}
					if(upgrades[0].upgrade2==2){
						ctx.drawImage(exSpeed1,400,800,400,100)
					}
					if(upgrades[0].upgrade2==3){
						ctx.drawImage(projectilevrpurple,400,800,400,100)
					}
					if(upgrades[0].upgrade2==4){
						ctx.drawImage(smallxplosions,400,800,400,100)
					}
				}
				if(upgrades[0].tier==2){
					if(upgrades[0].upgrade1==1){
						ctx.drawImage(exPierce2,0,800,400,100)
					}
					if(upgrades[0].upgrade1==2){
						ctx.drawImage(exPierce3,0,800,400,100)
					}
					if(upgrades[0].upgrade1==3){
						ctx.drawImage(popsandbagsblue,0,800,400,100)
					}
					if(upgrades[0].upgrade1==4){
						ctx.drawImage(infinitepierceblue,0,800,400,100)
					}
					if(upgrades[0].upgrade2==1){
						ctx.drawImage(exSpeed2,400,800,400,100)
					}
					if(upgrades[0].upgrade2==2){
						ctx.drawImage(exSpeed3,400,800,400,100)
					}
					if(upgrades[0].upgrade2==3){
						ctx.drawImage(projectilevelocityblue,400,800,400,100)
					}
					if(upgrades[0].upgrade2==4){
						ctx.drawImage(insanefiring,400,800,400,100)
					}
				}
				if(upgrades[0].tier==3){
					if(upgrades[0].upgrade1==1){
						ctx.drawImage(exR,0,800,400,100)
					}
					if(upgrades[0].upgrade1==2){
						ctx.drawImage(popBlacks,0,800,400,100)
					}
					if(upgrades[0].upgrade2==1){
						ctx.drawImage(exRange2,400,800,400,100)
					}
					if(upgrades[0].upgrade2==2){
						ctx.drawImage(exSpeed3,400,800,400,100)
					}
				}
				if(upgrades[0].tier==4){
					if(upgrades[0].upgrade1==1){
						ctx.drawImage(seconddart,0,800,400,100)
					}
					if(upgrades[0].upgrade1==2){
						ctx.drawImage(thirddart,0,800,400,100)
					}
					if(upgrades[0].upgrade2==1){
						ctx.drawImage(longerpoison,400,800,400,100)
					}
					if(upgrades[0].upgrade2==2){
						ctx.drawImage(potentpoison,400,800,400,100)
					}
				}
				if(upgrades[0].tier==5){
					if(upgrades[0].upgrade1==1){
						ctx.drawImage(leapadd,0,800,400,100)
					}
					if(upgrades[0].upgrade1==2){
						ctx.drawImage(shrapnel,0,800,400,100)
					}
					if(upgrades[0].upgrade2==1){
						ctx.drawImage(arm,400,800,400,100)
					}
					if(upgrades[0].upgrade2==2){
						ctx.drawImage(twoarms,400,800,400,100)
					}
				}
			}
			//draw circle
			if(drawcircle){
				ontop=false
				for(j=0;j<towers.length;j++){
					if(mouseX+30>(towers[j].x)&&mouseY+30>(towers[j].y)&&mouseX-30<(towers[j].x)+60&&mouseY-30<(towers[j].y)+60&&!ontop){
						ctx.beginPath();
						ctx.globalAlpha=0.5
						ctx.arc(mouseX,mouseY,PR,0,2*Math.PI);
						ctx.fillStyle="red"
						ctx.fill()
						ctx.stroke();
						ctx.globalAlpha=1
						ontop=true
					}
				}
				if(checkwater()&&!ontop){
					ctx.beginPath();
					ctx.globalAlpha=0.5
					ctx.arc(mouseX,mouseY,PR,0,2*Math.PI);
					ctx.fillStyle="red"
					ctx.fill()
					ctx.stroke();
					ctx.globalAlpha=1
					ontop=true
				}
				if((!((mouseX>30&&mouseX<70&&mouseY>30&&mouseY<395)||(mouseX>140&&mouseX<230&&mouseY>310&&mouseY<470)||(mouseX>30&&mouseX<770&&mouseY>30&&mouseY<70)||
				(mouseX>710&&mouseX<770&&mouseY>30&&mouseY<770)||(mouseX>480&&mouseX<770&&mouseY>340&&mouseY<400)||(mouseX>650&&mouseX<770&&mouseY>340&&mouseY<770)||
				(mouseX>340&&mouseX<770&&mouseY>730&&mouseY<770)||(mouseX>30&&mouseX<100&&mouseY>480&&mouseY<770)||(mouseX>30&&mouseX<240&&mouseY>570&&mouseY<770)||
				(mouseX>170&&mouseX<630&&mouseY>170&&mouseY<230)||(mouseX>310&&mouseX<400&&mouseY>170&&mouseY<640||(mouseX>30&&mouseX<570&&mouseY>570&&mouseY<660)||
				(mouseX>310&&mouseX<570&&mouseY>480&&mouseY<660)))&&!ontop)){
					ctx.beginPath();
					ctx.globalAlpha=0.5
					ctx.arc(mouseX,mouseY,PR,0,2*Math.PI);
					ctx.fillStyle="red"
					ctx.fill()
					ctx.stroke();
					ctx.globalAlpha=1
					ontop=true
				}
				if(((mouseX>30&&mouseX<70&&mouseY>30&&mouseY<395)||(mouseX>140&&mouseX<230&&mouseY>310&&mouseY<470)||(mouseX>30&&mouseX<770&&mouseY>30&&mouseY<70)||
				(mouseX>710&&mouseX<770&&mouseY>30&&mouseY<770)||(mouseX>480&&mouseX<770&&mouseY>340&&mouseY<400)||(mouseX>650&&mouseX<770&&mouseY>340&&mouseY<770)||
				(mouseX>340&&mouseX<770&&mouseY>730&&mouseY<770)||(mouseX>30&&mouseX<100&&mouseY>480&&mouseY<770)||(mouseX>30&&mouseX<240&&mouseY>570&&mouseY<770)||
				(mouseX>170&&mouseX<630&&mouseY>170&&mouseY<230)||(mouseX>310&&mouseX<400&&mouseY>170&&mouseY<640||(mouseX>30&&mouseX<570&&mouseY>570&&mouseY<660)||
				(mouseX>310&&mouseX<570&&mouseY>480&&mouseY<660)))&&!ontop){
					ctx.beginPath();
					ctx.globalAlpha=0.5
					ctx.arc(mouseX,mouseY,PR,0,2*Math.PI);
					ctx.fillStyle="white"
					ctx.fill()
					ctx.stroke();
					ctx.globalAlpha=1
				}
			}
			if(objects.length==0){
				projectiles=[]
				textColour="white"
				if(!gavemoney&&round!=0){
					money+=100+round
					money+=bankaddition()
					gavemoney=true
				}
			}
			if(objects.length!=0){
				textColour="red"
			}
			//hovermenus
			if(mouseX!==undefined){
				if(mouseX>=830&&mouseX<=875&&mouseY>=158&&mouseY<=205&&pickup==0){
					ctx.drawImage(phover,mouseX,mouseY,140,80)
				}
				if(mouseX>=930&&mouseX<=975&&mouseY>=158&&mouseY<=205&&pickup==0){
					ctx.drawImage(bhover,mouseX-140,mouseY,140,80)
				}
				if(mouseX>=830&&mouseX<=875&&mouseY>=233&&mouseY<=278&&pickup==0){
					ctx.drawImage(rhover,mouseX,mouseY,140,80)
				}
				if(mouseX>=930&&mouseX<=975&&mouseY>=233&&mouseY<=278&&pickup==0){
					ctx.drawImage(ghover,mouseX-140,mouseY,140,80)
				}
				if(mouseX>=830&&mouseX<=875&&mouseY>=306&&mouseY<=351&&pickup==0){
					ctx.drawImage(Grayhover,mouseX,mouseY,140,80)
				}
			}
			if(health<=0){
				objects=[]
				towers=[]
				hover=[]
				projectiles=[]
				explosions=[]
				flash=0
				justdone=false
				gs=40
				ts=60
				angle=0
				round=0
				globalspeed=1.5
				globalspeedcheck=1.5
				Oid=0
				drawcircle=false
				gavemoney=false
				textColour="purple"
				startY=400+gs/2
				startX=-50
				health=100
				money=700
				upgrades=[]
				projectileV=5
				updated=1
				pickup=false
				drawmenu=false
				stop=false
				openupgradesmenu=false
				oldxt=99999
				oldyt=99999
			}
		}
		function mousepressD(e){

		}
		ugrade=[]
		function mousepressU(e){
			ontop=false
			if(pickup==1){
				//check placement path
				if(((mouseX>30&&mouseX<70&&mouseY>30&&mouseY<395)||(mouseX>140&&mouseX<230&&mouseY>310&&mouseY<470)||(mouseX>30&&mouseX<770&&mouseY>30&&mouseY<70)||
				(mouseX>710&&mouseX<770&&mouseY>30&&mouseY<770)||(mouseX>480&&mouseX<770&&mouseY>340&&mouseY<400)||(mouseX>650&&mouseX<770&&mouseY>340&&mouseY<770)||
				(mouseX>340&&mouseX<770&&mouseY>730&&mouseY<770)||(mouseX>30&&mouseX<100&&mouseY>480&&mouseY<770)||(mouseX>30&&mouseX<240&&mouseY>570&&mouseY<770)||
				(mouseX>170&&mouseX<630&&mouseY>170&&mouseY<230)||(mouseX>310&&mouseX<400&&mouseY>170&&mouseY<640||(mouseX>30&&mouseX<570&&mouseY>570&&mouseY<660)||
				(mouseX>310&&mouseX<570&&mouseY>480&&mouseY<660)))&&!ontop){
					for(j=0;j<towers.length;j++){
						if(mouseX+30>(towers[j].x)&&mouseY+30>(towers[j].y)&&mouseX-30<(towers[j].x)+60&&mouseY-30<(towers[j].y)+60&&!ontop){
							ontop=true
						}
					}
					if(checkwater()){
						ontop=true
					}
					if(!ontop){
						pickup=false
						newpoisonlist=false
						if(poisons){
							newpoisonlist=[]
							for(i=0;i<poisons.length;i++){
								newpoisonlist.push(poisons[i])
							}
						}
						towers.push({x:mouseX-30,y:mouseY-30,TC:TC,range:PR,angle:0,tier:tier,pierce:pierce,cooldown:cooldown,originalcooldown:cooldown,upgrade1:1,upgrade2:1,flash:0,boom:explosion,
						popblacks:popblacks,poison:newpoisonlist,darts:dartsno,score:6000,leap:leap,roundmoney:income,streams:streams,sandbags:sandbags,velocity:velocityT})
						money-=price
						drawcircle=false
					}
				}
			}
			if(mouseX>=830&&mouseX<=875&&mouseY>=158&&mouseY<=205&&pickup==0){
				if(money>=180){
					pickup=true
					drawcircle=true
					TC=Pturret
					PR=110
					tier=1
					price=180
					pierce=1
					cooldown=105
					explosion=false
					popblacks=true
					poisons=false
					dartsno=false
					leap=false
					velocityT=7
					sandbags=false
					streams=false
					income=false
				}
			}
			if(mouseX>=930&&mouseX<=975&&mouseY>=158&&mouseY<=205&&pickup==0){
				if(money>=850){
					pickup=true
					drawcircle=true
					TC=Bturret
					PR=25
					tier=2
					price=850
					pierce=1
					cooldown=90
					explosion=false
					popblacks=true
					poisons=false
					dartsno=false
					leap=false
					velocityT=6
					sandbags=false
					streams=false
					income=false
				}
			}
			if(mouseX>=830&&mouseX<=875&&mouseY>=233&&mouseY<=278&&pickup==0){
				if(money>=650){
					pickup=true
					drawcircle=true
					TC=Rturret
					PR=130
					tier=3
					price=650
					pierce=1
					cooldown=115
					explosion=80
					popblacks=false
					poisons=false
					dartsno=false
					leap=false
					velocityT=5
					sandbags=true
					streams=false
					income=false
				}
			}
			if(mouseX>=930&&mouseX<=975&&mouseY>=233&&mouseY<=278&&pickup==0){
				if(money>=300){
					pickup=true
					drawcircle=true
					TC=Gturret
					PR=135
					tier=4
					price=300
					pierce=1
					cooldown=100
					explosion=false
					popblacks=true
					poisons=[150,4,150]
					dartsno=1
					leap=false
					velocityT=5
					sandbags=false
					streams=false
					income=false
				}
			}
			if(mouseX>=830&&mouseX<=875&&mouseY>=308&&mouseY<=353&&pickup==0){
				if(money>=700){
					pickup=true
					drawcircle=true
					TC=Tturret
					PR=100
					tier=5
					price=700
					pierce=20
					cooldown=225
					explosion=false
					popblacks=true
					poisons=false
					dartsno=false
					leap=61
					velocityT=5
					sandbags=false
					streams=false
					income=false
				}
			}
			if(mouseX>=930&&mouseX<=975&&mouseY>=308&&mouseY<=353&&pickup==0){
				if(money>=800){
					pickup=true
					drawcircle=true
					TC=bank
					PR=100
					tier=6
					price=800
					pierce=0
					cooldown=0
					explosion=false
					popblacks=false
					poisons=false
					dartsno=false
					leap=61
					velocityT=0
					sandbags=false
					streams=false
					income=64
				}
			}
			if(mouseX>=800&&mouseX<=1000&&mouseY>=800&&mouseY<=900){
				if(objects.length==0){
					globalspeed=1.5
					updated=0
					gavemoney=false
					round++
					startRound()
				}
				if(objects.length>0){
					if(globalspeed==3&&updated==1){
						globalspeed=1.5
						updated=0
					}
					if(globalspeed==1.5&&updated==1){
						globalspeed=3
						updated=0
					}
				}
			}
			//upgrade menu
			if(upgrades.length>0&&upgrades[0].tier==1){
				if(mouseX>0&&mouseX<400&&mouseY>800&&mouseY<900&&drawmenu){
					drawmenu=true
					if(upgrades[0].upgrade1==4){
						if(money>=1300){
							money-=1300
							towers[upgrades[0].towerIndex].streams=4
							towers[upgrades[0].towerIndex].upgrade1+=1
							upgrades[0].upgrade1+=1
						}
					}
					if(upgrades[0].upgrade1==3){
						if(money>=600){
							money-=600
							towers[upgrades[0].towerIndex].streams=2
							towers[upgrades[0].towerIndex].upgrade1+=1
							upgrades[0].upgrade1+=1
						}
					}
					if(upgrades[0].upgrade1==2){
						if(money>=500){
							money-=500
							towers[upgrades[0].towerIndex].pierce+=2
							towers[upgrades[0].towerIndex].upgrade1+=1
							upgrades[0].upgrade1+=1
						}
					}
					if(upgrades[0].upgrade1==1){
						if(money>=100){
							money-=100
							towers[upgrades[0].towerIndex].pierce+=1
							towers[upgrades[0].towerIndex].upgrade1+=1
							upgrades[0].upgrade1+=1
						}
					}
				}
				if(mouseX>400&&mouseX<800&&mouseY>800&&mouseY<900&&drawmenu){
					drawmenu=true
					if(upgrades[0].upgrade2==4){
						if(money>=1100){
							money-=1100
							towers[upgrades[0].towerIndex].boom=40
							towers[upgrades[0].towerIndex].upgrade2+=1
							upgrades[0].upgrade2+=1
						}
					}
					if(upgrades[0].upgrade2==3){
						if(money>=400){
							money-=400
							towers[upgrades[0].towerIndex].velocity+=4
							towers[upgrades[0].towerIndex].range+=25
							towers[upgrades[0].towerIndex].upgrade2+=1
							upgrades[0].upgrade2+=1
						}
					}
					if(upgrades[0].upgrade2==2){
						if(money>=400){
							money-=400
							towers[upgrades[0].towerIndex].originalcooldown-=15
							towers[upgrades[0].towerIndex].upgrade2+=1
							upgrades[0].upgrade2+=1
						}
					}
					if(upgrades[0].upgrade2==1){
						if(money>=100){
							money-=100
							towers[upgrades[0].towerIndex].range+=30
							towers[upgrades[0].towerIndex].upgrade2+=1
							upgrades[0].upgrade2+=1
						}
					}
				}
				justdone=true
			}
			if(upgrades.length>0&&upgrades[0].tier==2){
				if(mouseX>0&&mouseX<400&&mouseY>800&&mouseY<900&&drawmenu){
					drawmenu=true
					if(upgrades[0].upgrade1==4){
						if(money>=12000){
							money-=12000
							towers[upgrades[0].towerIndex].pierce+=100000
							towers[upgrades[0].towerIndex].upgrade1+=1
							upgrades[0].upgrade1+=1
						}
					}
					if(upgrades[0].upgrade1==3){
						if(money>=300){
							money-=300
							towers[upgrades[0].towerIndex].sandbags=true
							towers[upgrades[0].towerIndex].upgrade1+=1
							upgrades[0].upgrade1+=1
						}
					}
					if(upgrades[0].upgrade1==2){
						if(money>=1000){
							money-=1000
							towers[upgrades[0].towerIndex].pierce+=4
							towers[upgrades[0].towerIndex].upgrade1+=1
							upgrades[0].upgrade1+=1
						}
					}
					if(upgrades[0].upgrade1==1){
						if(money>=500){
							money-=500
							towers[upgrades[0].towerIndex].pierce+=2
							towers[upgrades[0].towerIndex].upgrade1+=1
							upgrades[0].upgrade1+=1
						}
					}
				}
				if(mouseX>400&&mouseX<800&&mouseY>800&&mouseY<900&&drawmenu){
					drawmenu=true
					if(upgrades[0].upgrade2==4){
						if(money>=9000){
							money-=9000
							towers[upgrades[0].towerIndex].originalcooldown=10
							towers[upgrades[0].towerIndex].upgrade2+=1
							upgrades[0].upgrade2+=1
						}
					}
					if(upgrades[0].upgrade2==3){
						if(money>=800){
							money-=800
							towers[upgrades[0].towerIndex].velocity+=5
							towers[upgrades[0].towerIndex].upgrade2+=1
							upgrades[0].upgrade2+=1
						}
					}
					if(upgrades[0].upgrade2==2){
						if(money>=600){
							money-=600
							towers[upgrades[0].towerIndex].originalcooldown-=25
							towers[upgrades[0].towerIndex].upgrade2+=1
							upgrades[0].upgrade2+=1
						}
					}
					if(upgrades[0].upgrade2==1){
						if(money>=300){
							money-=300
							towers[upgrades[0].towerIndex].originalcooldown-=10
							towers[upgrades[0].towerIndex].upgrade2+=1
							upgrades[0].upgrade2+=1
						}
					}
				}
				justdone=true
			}
			if(upgrades.length>0&&upgrades[0].tier==3){
				if(mouseX>0&&mouseX<400&&mouseY>800&&mouseY<900&&drawmenu){
					drawmenu=true
					if(upgrades[0].upgrade1==2){
						if(money>=200){
							money-=200
							towers[upgrades[0].towerIndex].popblacks=true
							towers[upgrades[0].towerIndex].upgrade1+=1
							upgrades[0].upgrade1+=1
						}
					}
					if(upgrades[0].upgrade1==1){
						if(money>=300){
							money-=300
							towers[upgrades[0].towerIndex].boom+=25
							towers[upgrades[0].towerIndex].upgrade1+=1
							upgrades[0].upgrade1+=1
						}
					}
				}
				if(mouseX>400&&mouseX<800&&mouseY>800&&mouseY<900&&drawmenu){
					drawmenu=true
					if(upgrades[0].upgrade2==2){
						if(money>=600){
							money-=600
							towers[upgrades[0].towerIndex].originalcooldown-=25
							towers[upgrades[0].towerIndex].upgrade2+=1
							upgrades[0].upgrade2+=1
						}
					}
					if(upgrades[0].upgrade2==1){
						if(money>=250){
							money-=250
							towers[upgrades[0].towerIndex].range+=30
							towers[upgrades[0].towerIndex].upgrade2+=1
							upgrades[0].upgrade2+=1
						}
					}
				}
				justdone=true
			}
			if(upgrades.length>0&&upgrades[0].tier==4){
				if(mouseX>0&&mouseX<400&&mouseY>800&&mouseY<900&&drawmenu){
					drawmenu=true
					if(upgrades[0].upgrade1==2){
						if(money>=550){
							money-=550
							towers[upgrades[0].towerIndex].darts=3
							towers[upgrades[0].towerIndex].upgrade1+=1
							upgrades[0].upgrade1+=1
						}
					}
					if(upgrades[0].upgrade1==1){
						if(money>=400){
							money-=400
							towers[upgrades[0].towerIndex].darts=2
							towers[upgrades[0].towerIndex].upgrade1+=1
							upgrades[0].upgrade1+=1
						}
					}
				}
				if(mouseX>400&&mouseX<800&&mouseY>800&&mouseY<900&&drawmenu){
					drawmenu=true
					if(upgrades[0].upgrade2==2){
						if(money>=250){
							money-=250
							towers[upgrades[0].towerIndex].poison[0]-=75
							towers[upgrades[0].towerIndex].upgrade2+=1
							upgrades[0].upgrade2+=1
						}
					}
					if(upgrades[0].upgrade2==1){
						if(money>=350){
							money-=350
							towers[upgrades[0].towerIndex].poison[1]+=2
							towers[upgrades[0].towerIndex].upgrade2+=1
							upgrades[0].upgrade2+=1
						}
					}
				}
				justdone=true
			}
			if(upgrades.length>0&&upgrades[0].tier==5){
				if(mouseX>0&&mouseX<400&&mouseY>800&&mouseY<900&&drawmenu){
					drawmenu=true
					if(upgrades[0].upgrade1==2){
						if(money>=990){
							money-=990
							towers[upgrades[0].towerIndex].shrapnel=true
							towers[upgrades[0].towerIndex].upgrade1+=1
							upgrades[0].upgrade1+=1
						}
					}
					if(upgrades[0].upgrade1==1){
						if(money>=450){
							money-=450
							towers[upgrades[0].towerIndex].leap+=20
							towers[upgrades[0].towerIndex].upgrade1+=1
							upgrades[0].upgrade1+=1
						}
					}
				}
				if(mouseX>400&&mouseX<800&&mouseY>800&&mouseY<900&&drawmenu){
					drawmenu=true
					if(upgrades[0].upgrade2==2){
						if(money>=600){
							money-=600
							towers[upgrades[0].towerIndex].armslength+=2
							towers[upgrades[0].towerIndex].cooldown-=20
							towers[upgrades[0].towerIndex].upgrade2+=1
							upgrades[0].upgrade2+=1
						}
					}
					if(upgrades[0].upgrade2==1){
						if(money>=380){
							money-=380
							towers[upgrades[0].towerIndex].armslength=1
							towers[upgrades[0].towerIndex].upgrade2+=1
							upgrades[0].upgrade2+=1
						}
					}
				}
				justdone=true
			}
			drawmenu=false
			for(m=0;m<towers.length;m++){
				if(mouseX>towers[m].x&&mouseY>towers[m].y&&mouseX<towers[m].x+60&&mouseY<towers[m].y+60&&!pickup){
					upgrades=[{x:towers[m].x+30,y:towers[m].y+30,tier:towers[m].tier,upgrade1:towers[m].upgrade1,upgrade2:towers[m].upgrade2,towerIndex:m,range:towers[m].range}]
					drawmenu=true
					justdone=false
				}
			}
			if(justdone&&mouseX>0&&mouseX<800&&mouseY>800&&mouseY<900){
				drawmenu=true
			}
			if(!(mouseX>0&&mouseX<800&&mouseY>800&&mouseY<900)){
				justdone=false
			}
		}
		function mousepos(evt){
			rect=canvas.getBoundingClientRect();
			mouseX=evt.clientX - rect.left;
			mouseY=evt.clientY - rect.top
			/*currentarray=[(Math.round(mouseX))]
			currentarray2=[(Math.round(mouseY))]
			coOrdinateArray.push(currentarray)
			coOrdinateArray2.push(currentarray2)*/
		}
		function keydown(e){
			if(e.keyCode==27){
				pickup=false
				drawcircle=false
			}
			if(e.keyCode==32&&objects.length==0){
				globalspeed=1.5
				updated=0
				gavemoney=false
				round++
				startRound()
			}
			if(e.keyCode==32&&objects.length>0){
				if(globalspeed==3&&updated==1){
					globalspeed=1.5
					updated=0
				}
				if(globalspeed==1.5&&updated==1){
					globalspeed=3
					updated=0
				}
			}
			if(e.keyCode==188&&upgrades.length>0&&upgrades[0].tier==1){
					drawmenu=true
					if(upgrades[0].upgrade1==2){
						if(money>=500){
							money-=500
							towers[upgrades[0].towerIndex].pierce+=2
							towers[upgrades[0].towerIndex].upgrade1+=1
							upgrades[0].upgrade1+=1
						}
					}
					if(upgrades[0].upgrade1==1){
						if(money>=100){
							money-=100
							towers[upgrades[0].towerIndex].pierce+=1
							towers[upgrades[0].towerIndex].upgrade1+=1
							upgrades[0].upgrade1+=1
						}
					}
				}
				if(e.keyCode==190&&upgrades.length>0&&upgrades[0].tier==1){
					drawmenu=true
					if(upgrades[0].upgrade2==2){
						if(money>=400){
							money-=400
							towers[upgrades[0].towerIndex].originalcooldown-=15
							towers[upgrades[0].towerIndex].upgrade2+=1
							upgrades[0].upgrade2+=1
						}
					}
					if(upgrades[0].upgrade2==1){
						if(money>=100){
							money-=100
							towers[upgrades[0].towerIndex].range+=30
							towers[upgrades[0].towerIndex].upgrade2+=1
							upgrades[0].upgrade2+=1
						}
					}
				justdone=true
			}
			if(e.keyCode==188&&upgrades.length>0&&upgrades[0].tier==2){
				drawmenu=true
				if(upgrades[0].upgrade1==2){
					if(money>=1000){
						money-=1000
						towers[upgrades[0].towerIndex].pierce+=4
						towers[upgrades[0].towerIndex].upgrade1+=1
						upgrades[0].upgrade1+=1
					}
				}
				if(upgrades[0].upgrade1==1){
					if(money>=500){
						money-=500
						towers[upgrades[0].towerIndex].pierce+=2
						towers[upgrades[0].towerIndex].upgrade1+=1
						upgrades[0].upgrade1+=1
					}
				}
			}
			if(e.keyCode==190&&upgrades.length>0&&upgrades[0].tier==2){
				drawmenu=true
				if(upgrades[0].upgrade2==2){
					if(money>=600){
						money-=600
						towers[upgrades[0].towerIndex].originalcooldown-=25
						towers[upgrades[0].towerIndex].upgrade2+=1
						upgrades[0].upgrade2+=1
					}
				}
				if(upgrades[0].upgrade2==1){
					if(money>=300){
						money-=300
						towers[upgrades[0].towerIndex].originalcooldown-=10
						towers[upgrades[0].towerIndex].upgrade2+=1
						upgrades[0].upgrade2+=1
					}
				}
			justdone=true
			}
			if(e.keyCode==188&&upgrades.length>0&&upgrades[0].tier==3){
				drawmenu=true
				if(upgrades[0].upgrade1==2){
					if(money>=200){
						money-=200
						towers[upgrades[0].towerIndex].popblacks=true
						towers[upgrades[0].towerIndex].upgrade1+=1
						upgrades[0].upgrade1+=1
					}
				}
				if(upgrades[0].upgrade1==1){
					if(money>=300){
						money-=300
						towers[upgrades[0].towerIndex].boom+=25
						towers[upgrades[0].towerIndex].upgrade1+=1
						upgrades[0].upgrade1+=1
					}
				}
			}
			if(e.keyCode==190&&upgrades.length>0&&upgrades[0].tier==3){
				drawmenu=true
				if(upgrades[0].upgrade2==2){
					if(money>=600){
						money-=600
						towers[upgrades[0].towerIndex].originalcooldown-=25
						towers[upgrades[0].towerIndex].upgrade2+=1
						upgrades[0].upgrade2+=1
					}
				}
				if(upgrades[0].upgrade2==1){
					if(money>=250){
						money-=250
						towers[upgrades[0].towerIndex].range+=30
						towers[upgrades[0].towerIndex].upgrade2+=1
						upgrades[0].upgrade2+=1
					}
				}
			justdone=true
			}
			if(e.keyCode==188&&upgrades.length>0&&upgrades[0].tier==4){
				drawmenu=true
				if(upgrades[0].upgrade1==2){
					if(money>=550){
						money-=550
						towers[upgrades[0].towerIndex].darts=3
						towers[upgrades[0].towerIndex].upgrade1+=1
						upgrades[0].upgrade1+=1
					}
				}
				if(upgrades[0].upgrade1==1){
					if(money>=400){
						money-=400
						towers[upgrades[0].towerIndex].darts=2
						towers[upgrades[0].towerIndex].upgrade1+=1
						upgrades[0].upgrade1+=1
					}
				}
			}
			if(e.keyCode==190&&upgrades.length>0&&upgrades[0].tier==4){
				drawmenu=true
				if(upgrades[0].upgrade2==2){
					if(money>=250){
						money-=250
						towers[upgrades[0].towerIndex].poison[0]-=75
						towers[upgrades[0].towerIndex].upgrade2+=1
						upgrades[0].upgrade2+=1
					}
				}
				if(upgrades[0].upgrade2==1){
					if(money>=350){
						money-=350
						towers[upgrades[0].towerIndex].poison[1]+=2
						towers[upgrades[0].towerIndex].upgrade2+=1
						upgrades[0].upgrade2+=1
					}
				}
			justdone=true
			}
			if(e.keyCode==188&&upgrades.length>0&&upgrades[0].tier==5){
				drawmenu=true
				if(upgrades[0].upgrade1==2){
					if(money>=990){
						money-=990
						towers[upgrades[0].towerIndex].shrapnel=true
						towers[upgrades[0].towerIndex].upgrade1+=1
						upgrades[0].upgrade1+=1
					}
				}
				if(upgrades[0].upgrade1==1){
					if(money>=450){
						money-=450
						towers[upgrades[0].towerIndex].leap+=20
						towers[upgrades[0].towerIndex].upgrade1+=1
						upgrades[0].upgrade1+=1
					}
				}
			}
			if(e.keyCode==190&&upgrades.length>0&&upgrades[0].tier==5){
				drawmenu=true
				if(upgrades[0].upgrade2==2){
					if(money>=600){
						money-=600
						towers[upgrades[0].towerIndex].armslength+=2
						towers[upgrades[0].towerIndex].cooldown-=20
						towers[upgrades[0].towerIndex].upgrade2+=1
						upgrades[0].upgrade2+=1
					}
				}
				if(upgrades[0].upgrade2==1){
					if(money>=380){
						money-=380
						towers[upgrades[0].towerIndex].armslength=1
						towers[upgrades[0].towerIndex].upgrade2+=1
						upgrades[0].upgrade2+=1
					}
				}
				justdone=true
			}
		}
		newTargets=[]
		startRound();
	}
</script>
